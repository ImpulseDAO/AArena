"use strict";(self.webpackChunkdapp=self.webpackChunkdapp||[]).push([[836],{2174:(e,t,n)=>{n.d(t,{L:()=>i,S9:()=>d,_H:()=>l,kw:()=>p});n(9664);var a=n(3051),r=n(6070);const o=(0,r.B)("\n  query BattleLogs {\n    battleLogs {\n      id\n      battleIndex\n      character1 {\n        winner\n        attributes\n        character\n        experience\n        rating\n        level\n      }\n      character2 {\n        winner\n        attributes\n        experience\n        character\n        level\n        rating\n      }\n      lobby {\n        id\n        characters {\n          id\n          character {\n            owner\n            name\n            level\n            experience\n            attributes\n            id\n          }\n        }\n        capacity\n      }\n      turns {\n        character1 {\n          energy\n          hp\n          position\n        }\n        logs {\n          action\n          character\n        }\n        character2 {\n          energy\n          position\n          hp\n        }\n      }\n    }\n  }\n"),l=()=>(0,a.a)(o,void 0,{select:e=>e.battleLogs}),s=(0,r.B)("\n  query BattleLogById($battleId: String!) {\n    battleLogById(id: $battleId) {\n      id\n      battleIndex\n      character1 {\n        winner\n        attributes\n        character\n        experience\n        rating\n        level\n      }\n      character2 {\n        winner\n        attributes\n        experience\n        character\n        level\n        rating\n      }\n      lobby {\n        id\n        characters {\n          id\n          character {\n            owner\n            name\n            level\n            experience\n            attributes\n            id\n          }\n        }\n        capacity\n      }\n      turns {\n        character1 {\n          energy\n          hp\n          position\n        }\n        logs {\n          action\n          character\n        }\n        character2 {\n          energy\n          position\n          hp\n        }\n      }\n    }\n  }\n"),i=e=>{let{battleId:t}=e;return(0,a.a)(s,{battleId:`${t}`},{enabled:null!=t,select:e=>e.battleLogById,placeholderData:e=>e})},c=(0,r.B)("\n  query BattleLogsByLobbyId($lobbyId: String!) {\n    battleLogs(where: { lobby: { id_eq: $lobbyId } }) {\n      id\n    }\n  }\n"),d=e=>{let{lobbyId:t}=e;return(0,a.a)(c,{lobbyId:`${t}`},{enabled:null!=t,select:e=>e.battleLogs})},p=(e,t)=>{var n;return null===(n=e.lobby.characters.find((e=>{let{character:{id:n}}=e;return n===t})))||void 0===n?void 0:n.character}},8311:(e,t,n)=>{n.d(t,{AX:()=>c,C7:()=>d,iV:()=>i});var a=n(3675),r=n(6070),o=n(3051),l=n(9664);(0,r.B)("\n  query AllCharacters {\n    characters {\n      id\n      level\n      name\n      owner\n      experience\n      attributes\n    }\n  }\n");const s=(0,r.B)("\n  query CharactersByOwner($owner_eq: String!) {\n    characters(where: { owner_eq: $owner_eq }) {\n      id\n      level\n      name\n      owner\n      experience\n      attributes\n    }\n  }\n"),i=()=>{const e=(0,o.P)(s);l.E.invalidateQueries({queryKey:[e]})},c=e=>{let{owner_eq:t}=e;return(0,o.a)(s,{owner_eq:t})},d=()=>{var e;const{account:t}=(0,a.mA)(),n=c({owner_eq:null!==(e=null===t||void 0===t?void 0:t.decodedAddress)&&void 0!==e?e:""}),r=n.data;return{...n,data:null===r||void 0===r?void 0:r.characters[(null===r||void 0===r?void 0:r.characters.length)-1]}};(0,r.B)("\n  query CharacterById($character_id: String!) {\n    characterById(id: $character_id) {\n      attributes\n      experience\n      id\n      level\n      name\n      owner\n    }\n  }\n")},5619:(e,t,n)=>{n.d(t,{k:()=>o});var a=n(8501),r=n(184);const o=e=>{let{children:t,onClick:n,...o}=e;return(0,r.jsx)(a.z,{onClick:n,radius:"sm",bg:"primary",size:"md",px:"xl",style:e=>({boxShadow:e.shadows.sm}),styles:e=>({root:{"&:disabled":{backgroundColor:e.colors.gray[5],color:e.colors.gray[6]}}}),...o,children:t})}},1313:(e,t,n)=>{n.d(t,{i:()=>r});var a=n(3675);const r=()=>{const{account:e}=(0,a.mA)();return null===e||void 0===e?void 0:e.decodedAddress}},3836:(e,t,n)=>{n.r(t),n.d(t,{History:()=>h});var a=n(2174),r=n(7065),o=n(905),l=n(4538),s=n(7689),i=n(1087),c=n(2791),d=n(8311),p=n(1313),m=n(5619),u=n(184);const h=()=>{var e;const t=(0,s.s0)(),n=(0,p.i)(),{data:h}=(0,d.AX)({owner_eq:null!==n&&void 0!==n?n:""}),{data:v}=(0,a._H)(),[g,w]=(0,i.lr)(),f="true"===g.get("filtered");(0,c.useEffect)((()=>{g.get("filtered")||w("filtered=true")}),[]);const x=c.useMemo((()=>{var e;if(!f)return v;const t=null!==(e=null===h||void 0===h?void 0:h.characters.map((e=>e.id)))&&void 0!==e?e:[];return null===v||void 0===v?void 0:v.filter((e=>t.includes(e.character1.character)||t.includes(e.character2.character)))}),[v,f,null===h||void 0===h?void 0:h.characters]),N=null!==(e=null===x||void 0===x?void 0:x.map((e=>{var t,n;const{id:r}=e,o=e.character1.character,l=e.character2.character;return{playersNames:[o,l].map((t=>{var n,r;return null!==(n=null===(r=(0,a.kw)(e,t))||void 0===r?void 0:r.name)&&void 0!==n?n:"Player not found"})),battleId:r,lobbyId:e.lobby.id,winner:e.character1.winner?null===(t=(0,a.kw)(e,o))||void 0===t?void 0:t.name:e.character2.winner?null===(n=(0,a.kw)(e,l))||void 0===n?void 0:n.name:"No winner"}})))&&void 0!==e?e:[];return(0,u.jsx)("div",{className:"logs",children:(0,u.jsxs)("div",{className:"modal_leaderboard",children:[(0,u.jsx)(r.k,{style:{alignSelf:"stretch"},mb:"xs",children:(0,u.jsx)(m.k,{size:"sm",bg:"black",onClick:()=>w((e=>{const t=new URLSearchParams(e);return t.set("filtered",f?"false":"true"),t})),children:f?"Show all logs":"Show my logs only"})}),(0,u.jsx)("div",{className:"header",children:"History"}),(0,u.jsx)("div",{className:"modal_table",children:(0,u.jsxs)(o.i,{horizontalSpacing:"md",verticalSpacing:"md",children:[(0,u.jsx)(o.i.Thead,{children:(0,u.jsx)(o.i.Tr,{children:["Lobby ID","Battle ID","Players","Winner"].map(((e,t)=>(0,u.jsx)(o.i.Th,{w:y[t],ta:b[t],children:e},e)))})}),(0,u.jsx)(o.i.Tbody,{children:N.map((e=>(0,u.jsx)(o.i.Tr,{onClick:()=>{const[n,a]=e.battleId.split("-");t(l.F.tournamentResult({lobbyId:n,battleId:a}))},className:"table_row",children:[(0,u.jsxs)("div",{className:"badge",children:[" ",e.lobbyId]}),(0,u.jsx)("div",{className:"badge",children:e.battleId}),e.playersNames.map((e=>(0,u.jsx)("div",{children:e}))),e.winner].map(((e,t)=>(0,u.jsx)(o.i.Td,{w:y[t],ta:b[t],children:e},t)))})))})]})})]})})},y={0:"100px",1:"100px"},b={0:"center",1:"center"}},8501:(e,t,n)=>{n.d(t,{z:()=>f});var a=n(2791),r=n(5146),o=n(5838),l=n(6519),s=n(204),i=n(245),c=n(6481),d=n(3715),p=n(3274),m=n(2020),u=n(8592),h={root:"m-77c9d27d",inner:"m-80f1301b",loader:"m-a25b86ee",label:"m-811560b9",section:"m-a74036a",group:"m-80d6d844"};const y={orientation:"horizontal"},b=(0,o.Z)(((e,t)=>{let{borderWidth:n}=t;return{group:{"--button-border-width":(0,m.h)(n)}}})),v=(0,u.d)(((e,t)=>{const n=(0,l.w)("ButtonGroup",y,e),{className:r,style:o,classNames:c,styles:d,unstyled:p,orientation:m,vars:u,borderWidth:v,variant:g,...w}=(0,l.w)("ButtonGroup",y,e),f=(0,s.y)({name:"ButtonGroup",props:n,classes:h,className:r,style:o,classNames:c,styles:d,unstyled:p,vars:u,varsResolver:b,rootSelector:"group"});return a.createElement(i.x,{...f("group"),ref:t,variant:g,mod:{"data-orientation":m},role:"group",...w})}));v.classes=h,v.displayName="@mantine/core/ButtonGroup";const g={},w=(0,o.Z)(((e,t)=>{let{radius:n,color:a,gradient:o,variant:l,size:s,justify:i,autoContrast:c}=t;const d=e.variantColorResolver({color:a||e.primaryColor,theme:e,gradient:o,variant:l||"filled",autoContrast:c});return{root:{"--button-justify":i,"--button-height":(0,r.ap)(s,"button-height"),"--button-padding-x":(0,r.ap)(s,"button-padding-x"),"--button-fz":null!==s&&void 0!==s&&s.includes("compact")?(0,r.yv)(s.replace("compact-","")):(0,r.yv)(s),"--button-radius":void 0===n?void 0:(0,r.H5)(n),"--button-bg":a||l?d.background:void 0,"--button-hover":a||l?d.hover:void 0,"--button-color":d.color,"--button-bd":a||l?d.border:void 0,"--button-hover-color":a||l?d.hoverColor:void 0}}})),f=(0,c.b)(((e,t)=>{const n=(0,l.w)("Button",g,e),{style:r,vars:o,className:c,color:m,disabled:u,children:y,leftSection:b,rightSection:v,fullWidth:f,variant:x,radius:N,loading:B,loaderProps:S,gradient:C,classNames:k,styles:E,unstyled:I,"data-disabled":j,autoContrast:T,...H}=n,_=(0,s.y)({name:"Button",props:n,classes:h,className:c,style:r,classNames:k,styles:E,unstyled:I,vars:o,varsResolver:w}),q=!!b,G=!!v;return a.createElement(p.k,{ref:t,..._("root",{active:!u&&!B&&!j}),unstyled:I,variant:x,disabled:u||B,mod:{disabled:u||j,loading:B,block:f,"with-left-section":q,"with-right-section":G},...H},a.createElement(i.x,{component:"span",..._("loader"),"aria-hidden":!0},a.createElement(d.a,{color:"var(--button-color)",size:"calc(var(--button-height) / 1.8)",...S})),a.createElement("span",{..._("inner")},b&&a.createElement(i.x,{component:"span",..._("section"),mod:{position:"left"}},b),a.createElement(i.x,{component:"span",mod:{loading:B},..._("label")},y),v&&a.createElement(i.x,{component:"span",..._("section"),mod:{position:"right"}},v)))}));f.classes=h,f.displayName="@mantine/core/Button",f.Group=v},7065:(e,t,n)=>{n.d(t,{k:()=>b});var a=n(2791),r=n(1378),o=n(8069),l=n(6519),s=n(204),i=n(8406),c=n(8055),d=n(7247),p=n(245),m=n(6481);const u={gap:{type:"spacing",property:"gap"},rowGap:{type:"spacing",property:"rowGap"},columnGap:{type:"spacing",property:"columnGap"},align:{type:"identity",property:"alignItems"},justify:{type:"identity",property:"justifyContent"},wrap:{type:"identity",property:"flexWrap"},direction:{type:"identity",property:"flexDirection"}};var h={root:"m-8bffd616"};const y={},b=(0,m.b)(((e,t)=>{const n=(0,l.w)("Flex",y,e),{classNames:m,className:b,style:v,styles:g,unstyled:w,vars:f,gap:x,rowGap:N,columnGap:B,align:S,justify:C,wrap:k,direction:E,...I}=n,j=(0,s.y)({name:"Flex",classes:h,props:n,className:b,style:v,classNames:m,styles:g,unstyled:w,vars:f}),T=(0,o.rZ)(),H=(0,d.m)(),_=(0,c.n)({styleProps:{gap:x,rowGap:N,columnGap:B,align:S,justify:C,wrap:k,direction:E},theme:T,data:u});return a.createElement(a.Fragment,null,_.hasResponsiveStyles&&a.createElement(i.f,{selector:`.${H}`,styles:_.styles,media:_.media}),a.createElement(p.x,{ref:t,...j("root",{className:H,style:(0,r.L)(_.inlineStyles)}),...I}))}));b.classes=h,b.displayName="@mantine/core/Flex"},905:(e,t,n)=>{n.d(t,{i:()=>_});var a=n(2791),r=n(2020),o=n(5146),l=n(5838),s=n(3768),i=n(6519),c=n(204),d=n(245),p=n(8592),m=n(4799);const[u,h]=(0,m.R)("Table component was not found in the tree");var y={table:"m-b23fa0ef",th:"m-4e7aa4f3",tr:"m-4e7aa4fd",td:"m-4e7aa4ef",tbody:"m-b2404537",thead:"m-b242d975",caption:"m-9e5a3ac7",scrollContainer:"m-a100c15",scrollContainerInner:"m-62259741"};function b(e,t){if(!t)return;const n={};return t.columnBorder&&e.withColumnBorders&&(n["data-with-column-border"]=!0),t.rowBorder&&e.withRowBorders&&(n["data-with-row-border"]=!0),t.striped&&e.striped&&(n["data-striped"]=e.striped),t.highlightOnHover&&e.highlightOnHover&&(n["data-hover"]=!0),t.captionSide&&e.captionSide&&(n["data-side"]=e.captionSide),t.stickyHeader&&e.stickyHeader&&(n["data-sticky"]=!0),n}function v(e,t){const n=`Table${e.charAt(0).toUpperCase()}${e.slice(1)}`,r=(0,p.d)(((r,o)=>{const l=(0,i.w)(n,{},r),{classNames:s,className:c,style:p,styles:m,...u}=l,y=h();return a.createElement(d.x,{component:e,ref:o,...b(y,t),...y.getStyles(e,{className:c,classNames:s,style:p,styles:m,props:l}),...u})}));return r.displayName=`@mantine/core/${n}`,r.classes=y,r}const g=v("th",{columnBorder:!0}),w=v("td",{columnBorder:!0}),f=v("tr",{rowBorder:!0,striped:!0,highlightOnHover:!0}),x=v("thead",{stickyHeader:!0}),N=v("tbody"),B=v("tfoot"),S=v("caption",{captionSide:!0});function C(e){let{data:t}=e;return a.createElement(a.Fragment,null,t.caption&&a.createElement(S,null,t.caption),t.head&&a.createElement(x,null,a.createElement(f,null,t.head.map(((e,t)=>a.createElement(g,{key:t},e))))),t.body&&a.createElement(N,null,t.body.map(((e,t)=>a.createElement(f,{key:t},e.map(((e,t)=>a.createElement(w,{key:t},e))))))),t.foot&&a.createElement(B,null,a.createElement(f,null,t.foot.map(((e,t)=>a.createElement(g,{key:t},e))))))}C.displayName="@mantine/core/TableDataRenderer";var k=n(1619);const E={type:"scrollarea"},I=(0,l.Z)(((e,t)=>{let{minWidth:n,type:a}=t;return{scrollContainer:{"--table-min-width":(0,r.h)(n),"--table-overflow":"native"===a?"auto":void 0}}})),j=(0,p.d)(((e,t)=>{const n=(0,i.w)("TableScrollContainer",E,e),{classNames:r,className:o,style:l,styles:s,unstyled:p,vars:m,children:u,minWidth:h,type:b,...v}=n,g=(0,c.y)({name:"TableScrollContainer",classes:y,props:n,className:o,style:l,classNames:r,styles:s,unstyled:p,vars:m,varsResolver:I,rootSelector:"scrollContainer"});return a.createElement(d.x,{component:"scrollarea"===b?k.x:"div",..."scrollarea"===b?{offsetScrollbars:"x"}:{},ref:t,...g("scrollContainer"),...v},a.createElement("div",{...g("scrollContainerInner")},u))}));j.classes=y,j.displayName="@mantine/core/TableScrollContainer";const T={withRowBorders:!0,verticalSpacing:7},H=(0,l.Z)(((e,t)=>{let{layout:n,captionSide:a,horizontalSpacing:l,verticalSpacing:i,borderColor:c,stripedColor:d,highlightOnHoverColor:p,striped:m,highlightOnHover:u,stickyHeaderOffset:h,stickyHeader:y}=t;return{table:{"--table-layout":n,"--table-caption-side":a,"--table-horizontal-spacing":(0,o.bG)(l),"--table-vertical-spacing":(0,o.bG)(i),"--table-border-color":c?(0,s.p)(c,e):void 0,"--table-striped-color":m&&d?(0,s.p)(d,e):void 0,"--table-highlight-on-hover-color":u&&p?(0,s.p)(p,e):void 0,"--table-sticky-header-offset":y?(0,r.h)(h):void 0}}})),_=(0,p.d)(((e,t)=>{const n=(0,i.w)("Table",T,e),{classNames:r,className:o,style:l,styles:s,unstyled:p,vars:m,horizontalSpacing:h,verticalSpacing:b,captionSide:v,stripedColor:g,highlightOnHoverColor:w,striped:f,highlightOnHover:x,withColumnBorders:N,withRowBorders:B,withTableBorder:S,borderColor:k,layout:E,variant:I,data:j,children:_,stickyHeader:q,stickyHeaderOffset:G,...R}=n,L=(0,c.y)({name:"Table",props:n,className:o,style:l,classes:y,classNames:r,styles:s,unstyled:p,rootSelector:"table",vars:m,varsResolver:H});return a.createElement(u,{value:{getStyles:L,stickyHeader:q,striped:!0===f?"odd":f||void 0,highlightOnHover:x,withColumnBorders:N,withRowBorders:B,captionSide:v||"bottom"}},a.createElement(d.x,{component:"table",variant:I,ref:t,mod:{"data-with-table-border":S},...L("table"),...R},_||!!j&&a.createElement(C,{data:j})))}));_.classes=y,_.displayName="@mantine/core/Table",_.Td=w,_.Th=g,_.Tr=f,_.Thead=x,_.Tbody=N,_.Tfoot=B,_.Caption=S,_.ScrollContainer=j,_.DataRenderer=C},3274:(e,t,n)=>{n.d(t,{k:()=>d});var a=n(2791),r=n(6519),o=n(204),l=n(245),s=n(6481),i={root:"m-87cf2631"};const c={__staticSelector:"UnstyledButton"},d=(0,s.b)(((e,t)=>{const n=(0,r.w)("UnstyledButton",c,e),{className:s,component:d="button",__staticSelector:p,unstyled:m,classNames:u,styles:h,style:y,...b}=n,v=(0,o.y)({name:p,props:n,classes:i,className:s,style:y,classNames:u,styles:h,unstyled:m});return a.createElement(l.x,{...v("root",{focusable:!0}),component:d,ref:t,type:"button"===d?"button":void 0,...b})}));d.classes=i,d.displayName="@mantine/core/UnstyledButton"}}]);
//# sourceMappingURL=836.ff846d04.chunk.js.map