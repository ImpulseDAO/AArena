"use strict";(self.webpackChunkdapp=self.webpackChunkdapp||[]).push([[337],{2174:(e,t,n)=>{n.d(t,{L:()=>i,S9:()=>d,_H:()=>l,kw:()=>u});n(9664);var r=n(3051),a=n(6070);const o=(0,a.B)("\n  query BattleLogs {\n    battleLogs {\n      id\n      battleIndex\n      character1 {\n        winner\n        attributes\n        character\n        experience\n        rating\n        level\n      }\n      character2 {\n        winner\n        attributes\n        experience\n        character\n        level\n        rating\n      }\n      lobby {\n        id\n        characters {\n          id\n          character {\n            owner\n            name\n            level\n            experience\n            attributes\n            id\n          }\n        }\n        capacity\n      }\n      turns {\n        character1 {\n          energy\n          hp\n          position\n        }\n        logs {\n          action\n          character\n        }\n        character2 {\n          energy\n          position\n          hp\n        }\n      }\n    }\n  }\n"),l=()=>(0,r.a)(o,void 0,{select:e=>e.battleLogs}),s=(0,a.B)("\n  query BattleLogById($battleId: String!) {\n    battleLogById(id: $battleId) {\n      id\n      battleIndex\n      character1 {\n        winner\n        attributes\n        character\n        experience\n        rating\n        level\n      }\n      character2 {\n        winner\n        attributes\n        experience\n        character\n        level\n        rating\n      }\n      lobby {\n        id\n        characters {\n          id\n          character {\n            owner\n            name\n            level\n            experience\n            attributes\n            id\n          }\n        }\n        capacity\n      }\n      turns {\n        character1 {\n          energy\n          hp\n          position\n        }\n        logs {\n          action\n          character\n        }\n        character2 {\n          energy\n          position\n          hp\n        }\n      }\n    }\n  }\n"),i=e=>{let{battleId:t}=e;return(0,r.a)(s,{battleId:`${t}`},{enabled:null!=t,select:e=>e.battleLogById,placeholderData:e=>e})},c=(0,a.B)("\n  query BattleLogsByLobbyId($lobbyId: String!) {\n    battleLogs(where: { lobby: { id_eq: $lobbyId } }) {\n      id\n    }\n  }\n"),d=e=>{let{lobbyId:t}=e;return(0,r.a)(c,{lobbyId:`${t}`},{enabled:null!=t,select:e=>e.battleLogs})},u=(e,t)=>{var n;return null===(n=e.lobby.characters.find((e=>{let{character:{id:n}}=e;return n===t})))||void 0===n?void 0:n.character}},8311:(e,t,n)=>{n.d(t,{AX:()=>c,C7:()=>d,iV:()=>i});var r=n(3675),a=n(6070),o=n(3051),l=n(9664);(0,a.B)("\n  query AllCharacters {\n    characters {\n      id\n      level\n      name\n      owner\n      experience\n      attributes\n    }\n  }\n");const s=(0,a.B)("\n  query CharactersByOwner($owner_eq: String!) {\n    characters(where: { owner_eq: $owner_eq }) {\n      id\n      level\n      name\n      owner\n      experience\n      attributes\n    }\n  }\n"),i=()=>{const e=(0,o.P)(s);l.E.invalidateQueries({queryKey:[e]})},c=e=>{let{owner_eq:t}=e;return(0,o.a)(s,{owner_eq:t})},d=()=>{var e;const{account:t}=(0,r.mA)(),n=c({owner_eq:null!==(e=null===t||void 0===t?void 0:t.decodedAddress)&&void 0!==e?e:""}),a=n.data;return{...n,data:null===a||void 0===a?void 0:a.characters[(null===a||void 0===a?void 0:a.characters.length)-1]}};(0,a.B)("\n  query CharacterById($character_id: String!) {\n    characterById(id: $character_id) {\n      attributes\n      experience\n      id\n      level\n      name\n      owner\n    }\n  }\n")},5619:(e,t,n)=>{n.d(t,{k:()=>o});var r=n(8501),a=n(184);const o=e=>{let{children:t,onClick:n,...o}=e;return(0,a.jsx)(r.z,{onClick:n,radius:"sm",bg:"primary",size:"md",px:"xl",style:e=>({boxShadow:e.shadows.sm}),styles:e=>({root:{"&:disabled":{backgroundColor:e.colors.gray[5],color:e.colors.gray[6]}}}),...o,children:t})}},1313:(e,t,n)=>{n.d(t,{i:()=>a});var r=n(3675);const a=()=>{const{account:e}=(0,r.mA)();return null===e||void 0===e?void 0:e.decodedAddress}},3836:(e,t,n)=>{n.r(t),n.d(t,{History:()=>y});var r=n(2174),a=n(7065),o=n(905),l=n(4538),s=n(7689),i=n(1087),c=n(2791),d=n(8311),u=n(1313),p=n(5619),m=n(184);const y=()=>{var e;const t=(0,s.s0)(),n=(0,u.i)(),{data:y}=(0,d.AX)({owner_eq:null!==n&&void 0!==n?n:""}),{data:v}=(0,r._H)(),[g,w]=(0,i.lr)(),f="true"===g.get("filtered");(0,c.useEffect)((()=>{g.get("filtered")||w("filtered=true")}),[]);const x=c.useMemo((()=>{var e;if(!f)return v;const t=null!==(e=null===y||void 0===y?void 0:y.characters.map((e=>e.id)))&&void 0!==e?e:[];return null===v||void 0===v?void 0:v.filter((e=>t.includes(e.character1.character)||t.includes(e.character2.character)))}),[v,f,null===y||void 0===y?void 0:y.characters]),N=null!==(e=null===x||void 0===x?void 0:x.map((e=>{var t,n;const{id:a}=e,o=e.character1.character,l=e.character2.character;return{playersNames:[o,l].map((t=>{var n,a;return null!==(n=null===(a=(0,r.kw)(e,t))||void 0===a?void 0:a.name)&&void 0!==n?n:"Player not found"})),battleId:a,lobbyId:e.lobby.id,winner:e.character1.winner?null===(t=(0,r.kw)(e,o))||void 0===t?void 0:t.name:e.character2.winner?null===(n=(0,r.kw)(e,l))||void 0===n?void 0:n.name:"No winner"}})))&&void 0!==e?e:[];return(0,m.jsx)("div",{className:"logs",children:(0,m.jsxs)("div",{className:"modal_leaderboard",children:[(0,m.jsx)(a.k,{style:{alignSelf:"stretch"},mb:"xs",children:(0,m.jsx)(p.k,{size:"sm",bg:"black",onClick:()=>w((e=>{const t=new URLSearchParams(e);return t.set("filtered",f?"false":"true"),t})),children:f?"Show all logs":"Show my logs only"})}),(0,m.jsx)("div",{className:"header",children:"History"}),(0,m.jsx)("div",{className:"modal_table",children:(0,m.jsxs)(o.i,{horizontalSpacing:"md",verticalSpacing:"md",children:[(0,m.jsx)(o.i.Thead,{children:(0,m.jsx)(o.i.Tr,{children:["Lobby ID","Battle ID","Players","Winner"].map(((e,t)=>(0,m.jsx)(o.i.Th,{w:h[t],ta:b[t],children:e},e)))})}),(0,m.jsx)(o.i.Tbody,{children:N.map((e=>(0,m.jsx)(o.i.Tr,{onClick:()=>{const[n,r]=e.battleId.split("-");t(l.F.tournamentResult({lobbyId:n,battleId:r}))},className:"table_row",children:[(0,m.jsxs)("div",{className:"badge",children:[" ",e.lobbyId]}),(0,m.jsx)("div",{className:"badge",children:e.battleId}),e.playersNames.map((e=>(0,m.jsx)("div",{children:e}))),e.winner].map(((e,t)=>(0,m.jsx)(o.i.Td,{w:h[t],ta:b[t],children:e},t)))})))})]})})]})})},h={0:"100px",1:"100px"},b={0:"center",1:"center"}},8501:(e,t,n)=>{n.d(t,{z:()=>f});var r=n(2791),a=n(5146),o=n(5838),l=n(6519),s=n(204),i=n(245),c=n(6481),d=n(3715),u=n(3274),p=n(2020),m=n(8592),y={root:"m-77c9d27d",inner:"m-80f1301b",loader:"m-a25b86ee",label:"m-811560b9",section:"m-a74036a",group:"m-80d6d844"};const h={orientation:"horizontal"},b=(0,o.Z)(((e,t)=>{let{borderWidth:n}=t;return{group:{"--button-border-width":(0,p.h)(n)}}})),v=(0,m.d)(((e,t)=>{const n=(0,l.w)("ButtonGroup",h,e),{className:a,style:o,classNames:c,styles:d,unstyled:u,orientation:p,vars:m,borderWidth:v,variant:g,...w}=(0,l.w)("ButtonGroup",h,e),f=(0,s.y)({name:"ButtonGroup",props:n,classes:y,className:a,style:o,classNames:c,styles:d,unstyled:u,vars:m,varsResolver:b,rootSelector:"group"});return r.createElement(i.x,{...f("group"),ref:t,variant:g,mod:{"data-orientation":p},role:"group",...w})}));v.classes=y,v.displayName="@mantine/core/ButtonGroup";const g={},w=(0,o.Z)(((e,t)=>{let{radius:n,color:r,gradient:o,variant:l,size:s,justify:i,autoContrast:c}=t;const d=e.variantColorResolver({color:r||e.primaryColor,theme:e,gradient:o,variant:l||"filled",autoContrast:c});return{root:{"--button-justify":i,"--button-height":(0,a.ap)(s,"button-height"),"--button-padding-x":(0,a.ap)(s,"button-padding-x"),"--button-fz":null!==s&&void 0!==s&&s.includes("compact")?(0,a.yv)(s.replace("compact-","")):(0,a.yv)(s),"--button-radius":void 0===n?void 0:(0,a.H5)(n),"--button-bg":r||l?d.background:void 0,"--button-hover":r||l?d.hover:void 0,"--button-color":d.color,"--button-bd":r||l?d.border:void 0,"--button-hover-color":r||l?d.hoverColor:void 0}}})),f=(0,c.b)(((e,t)=>{const n=(0,l.w)("Button",g,e),{style:a,vars:o,className:c,color:p,disabled:m,children:h,leftSection:b,rightSection:v,fullWidth:f,variant:x,radius:N,loading:C,loaderProps:B,gradient:S,classNames:k,styles:E,unstyled:I,"data-disabled":j,autoContrast:T,...H}=n,_=(0,s.y)({name:"Button",props:n,classes:y,className:c,style:a,classNames:k,styles:E,unstyled:I,vars:o,varsResolver:w}),R=!!b,q=!!v;return r.createElement(u.k,{ref:t,..._("root",{active:!m&&!C&&!j}),unstyled:I,variant:x,disabled:m||C,mod:{disabled:m||j,loading:C,block:f,"with-left-section":R,"with-right-section":q},...H},r.createElement(i.x,{component:"span",..._("loader"),"aria-hidden":!0},r.createElement(d.a,{color:"var(--button-color)",size:"calc(var(--button-height) / 1.8)",...B})),r.createElement("span",{..._("inner")},b&&r.createElement(i.x,{component:"span",..._("section"),mod:{position:"left"}},b),r.createElement(i.x,{component:"span",mod:{loading:C},..._("label")},h),v&&r.createElement(i.x,{component:"span",..._("section"),mod:{position:"right"}},v)))}));f.classes=y,f.displayName="@mantine/core/Button",f.Group=v},7065:(e,t,n)=>{n.d(t,{k:()=>b});var r=n(2791),a=n(1378),o=n(8069),l=n(6519),s=n(204),i=n(8406),c=n(8055),d=n(7247),u=n(245),p=n(6481);const m={gap:{type:"spacing",property:"gap"},rowGap:{type:"spacing",property:"rowGap"},columnGap:{type:"spacing",property:"columnGap"},align:{type:"identity",property:"alignItems"},justify:{type:"identity",property:"justifyContent"},wrap:{type:"identity",property:"flexWrap"},direction:{type:"identity",property:"flexDirection"}};var y={root:"m-8bffd616"};const h={},b=(0,p.b)(((e,t)=>{const n=(0,l.w)("Flex",h,e),{classNames:p,className:b,style:v,styles:g,unstyled:w,vars:f,gap:x,rowGap:N,columnGap:C,align:B,justify:S,wrap:k,direction:E,...I}=n,j=(0,s.y)({name:"Flex",classes:y,props:n,className:b,style:v,classNames:p,styles:g,unstyled:w,vars:f}),T=(0,o.rZ)(),H=(0,d.m)(),_=(0,c.n)({styleProps:{gap:x,rowGap:N,columnGap:C,align:B,justify:S,wrap:k,direction:E},theme:T,data:m});return r.createElement(r.Fragment,null,_.hasResponsiveStyles&&r.createElement(i.f,{selector:`.${H}`,styles:_.styles,media:_.media}),r.createElement(u.x,{ref:t,...j("root",{className:H,style:(0,a.L)(_.inlineStyles)}),...I}))}));b.classes=y,b.displayName="@mantine/core/Flex"},905:(e,t,n)=>{n.d(t,{i:()=>_});var r=n(2791),a=n(2020),o=n(5146),l=n(5838),s=n(3768),i=n(6519),c=n(204),d=n(245),u=n(8592),p=n(4799);const[m,y]=(0,p.R)("Table component was not found in the tree");var h={table:"m-b23fa0ef",th:"m-4e7aa4f3",tr:"m-4e7aa4fd",td:"m-4e7aa4ef",tbody:"m-b2404537",thead:"m-b242d975",caption:"m-9e5a3ac7",scrollContainer:"m-a100c15",scrollContainerInner:"m-62259741"};function b(e,t){if(!t)return;const n={};return t.columnBorder&&e.withColumnBorders&&(n["data-with-column-border"]=!0),t.rowBorder&&e.withRowBorders&&(n["data-with-row-border"]=!0),t.striped&&e.striped&&(n["data-striped"]=e.striped),t.highlightOnHover&&e.highlightOnHover&&(n["data-hover"]=!0),t.captionSide&&e.captionSide&&(n["data-side"]=e.captionSide),t.stickyHeader&&e.stickyHeader&&(n["data-sticky"]=!0),n}function v(e,t){const n=`Table${e.charAt(0).toUpperCase()}${e.slice(1)}`,a=(0,u.d)(((a,o)=>{const l=(0,i.w)(n,{},a),{classNames:s,className:c,style:u,styles:p,...m}=l,h=y();return r.createElement(d.x,{component:e,ref:o,...b(h,t),...h.getStyles(e,{className:c,classNames:s,style:u,styles:p,props:l}),...m})}));return a.displayName=`@mantine/core/${n}`,a.classes=h,a}const g=v("th",{columnBorder:!0}),w=v("td",{columnBorder:!0}),f=v("tr",{rowBorder:!0,striped:!0,highlightOnHover:!0}),x=v("thead",{stickyHeader:!0}),N=v("tbody"),C=v("tfoot"),B=v("caption",{captionSide:!0});function S(e){let{data:t}=e;return r.createElement(r.Fragment,null,t.caption&&r.createElement(B,null,t.caption),t.head&&r.createElement(x,null,r.createElement(f,null,t.head.map(((e,t)=>r.createElement(g,{key:t},e))))),t.body&&r.createElement(N,null,t.body.map(((e,t)=>r.createElement(f,{key:t},e.map(((e,t)=>r.createElement(w,{key:t},e))))))),t.foot&&r.createElement(C,null,r.createElement(f,null,t.foot.map(((e,t)=>r.createElement(g,{key:t},e))))))}S.displayName="@mantine/core/TableDataRenderer";var k=n(1619);const E={type:"scrollarea"},I=(0,l.Z)(((e,t)=>{let{minWidth:n,type:r}=t;return{scrollContainer:{"--table-min-width":(0,a.h)(n),"--table-overflow":"native"===r?"auto":void 0}}})),j=(0,u.d)(((e,t)=>{const n=(0,i.w)("TableScrollContainer",E,e),{classNames:a,className:o,style:l,styles:s,unstyled:u,vars:p,children:m,minWidth:y,type:b,...v}=n,g=(0,c.y)({name:"TableScrollContainer",classes:h,props:n,className:o,style:l,classNames:a,styles:s,unstyled:u,vars:p,varsResolver:I,rootSelector:"scrollContainer"});return r.createElement(d.x,{component:"scrollarea"===b?k.x:"div",..."scrollarea"===b?{offsetScrollbars:"x"}:{},ref:t,...g("scrollContainer"),...v},r.createElement("div",{...g("scrollContainerInner")},m))}));j.classes=h,j.displayName="@mantine/core/TableScrollContainer";const T={withRowBorders:!0,verticalSpacing:7},H=(0,l.Z)(((e,t)=>{let{layout:n,captionSide:r,horizontalSpacing:l,verticalSpacing:i,borderColor:c,stripedColor:d,highlightOnHoverColor:u,striped:p,highlightOnHover:m,stickyHeaderOffset:y,stickyHeader:h}=t;return{table:{"--table-layout":n,"--table-caption-side":r,"--table-horizontal-spacing":(0,o.bG)(l),"--table-vertical-spacing":(0,o.bG)(i),"--table-border-color":c?(0,s.p)(c,e):void 0,"--table-striped-color":p&&d?(0,s.p)(d,e):void 0,"--table-highlight-on-hover-color":m&&u?(0,s.p)(u,e):void 0,"--table-sticky-header-offset":h?(0,a.h)(y):void 0}}})),_=(0,u.d)(((e,t)=>{const n=(0,i.w)("Table",T,e),{classNames:a,className:o,style:l,styles:s,unstyled:u,vars:p,horizontalSpacing:y,verticalSpacing:b,captionSide:v,stripedColor:g,highlightOnHoverColor:w,striped:f,highlightOnHover:x,withColumnBorders:N,withRowBorders:C,withTableBorder:B,borderColor:k,layout:E,variant:I,data:j,children:_,stickyHeader:R,stickyHeaderOffset:q,...G}=n,L=(0,c.y)({name:"Table",props:n,className:o,style:l,classes:h,classNames:a,styles:s,unstyled:u,rootSelector:"table",vars:p,varsResolver:H});return r.createElement(m,{value:{getStyles:L,stickyHeader:R,striped:!0===f?"odd":f||void 0,highlightOnHover:x,withColumnBorders:N,withRowBorders:C,captionSide:v||"bottom"}},r.createElement(d.x,{component:"table",variant:I,ref:t,mod:{"data-with-table-border":B},...L("table"),...G},_||!!j&&r.createElement(S,{data:j})))}));_.classes=h,_.displayName="@mantine/core/Table",_.Td=w,_.Th=g,_.Tr=f,_.Thead=x,_.Tbody=N,_.Tfoot=C,_.Caption=B,_.ScrollContainer=j,_.DataRenderer=S},3274:(e,t,n)=>{n.d(t,{k:()=>d});var r=n(2791),a=n(6519),o=n(204),l=n(245),s=n(6481),i={root:"m-87cf2631"};const c={__staticSelector:"UnstyledButton"},d=(0,s.b)(((e,t)=>{const n=(0,a.w)("UnstyledButton",c,e),{className:s,component:d="button",__staticSelector:u,unstyled:p,classNames:m,styles:y,style:h,...b}=n,v=(0,o.y)({name:u,props:n,classes:i,className:s,style:h,classNames:m,styles:y,unstyled:p});return r.createElement(l.x,{...v("root",{focusable:!0}),component:d,ref:t,type:"button"===d?"button":void 0,...b})}));d.classes=i,d.displayName="@mantine/core/UnstyledButton"},8290:(e,t,n)=>{n.d(t,{gm:()=>o});var r=n(2791);const a=(0,r.createContext)({dir:"ltr",toggleDirection:()=>{},setDirection:()=>{}});function o(){return(0,r.useContext)(a)}},6504:(e,t,n)=>{n.d(t,{Yx:()=>o,kR:()=>a});var r=n(2791);function a(e,t){"function"===typeof e?e(t):"object"===typeof e&&null!==e&&"current"in e&&(e.current=t)}function o(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,r.useCallback)(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>{t.forEach((t=>a(t,e)))}}(...t),t)}}}]);
//# sourceMappingURL=337.f8c40068.chunk.js.map