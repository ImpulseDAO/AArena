"use strict";(self.webpackChunkdapp=self.webpackChunkdapp||[]).push([[267],{9882:(e,t,s)=>{s.r(t),s.d(t,{Battle:()=>b});var a=s(2791);const i=s.p+"static/media/step_back.d8330a176ce7365419928293ce4e57d4.svg";const l=s.p+"static/media/step_forward.1b98f31e2cd2e5a80d471fce537ae5c8.svg";const n=s.p+"static/media/forward.b60cb2268c2eae20ebae79bbca831b1d.svg";const r=s.p+"static/media/back.8de93fbe4e80fb9e36206bd1063f6702.svg";var c=s(703);const o={quickAttack:{success:e=>`${e} swiftly strikes the opponent with a quick attack, catching them off guard. The sound of steel meeting flesh echoes through the arena as the opponent staggers backward, momentarily disoriented`,fail:e=>`${e} swiftly lunges forward, aiming for a quick strike, but their opponent is as quick as a viper. With uncanny reflexes, the opponent anticipates the attack and gracefully evades it, leaving ${e} momentarily off balance. The crowd gasps in anticipation as the Gladiator readies themselves for the opponent's imminent counterattack`},normalAttack:{success:e=>`With a calculated swing, ${e} delivers a solid blow with a normal attack. The clash of weapons reverberates in the air as the opponent grunts in pain`,fail:e=>`With determination, ${e} delivers a well-measured strike, but their opponent proves to be a formidable adversary. The opponent's defenses hold strong, deflecting the ${e}\u2019s attack with impeccable skill. The clash of weapons echoes through the arena, drawing the attention of the crowd, who watches in anticipation as the ${e} quickly recovers, preparing for their next move`},hardAttack:{success:e=>`Gathering all their strength, ${e} unleashes a powerful strike with a resounding impact. The force of the blow sends shockwaves through the arena, causing the opponent to stumble backward, clutching their wounds`,fail:e=>`Gathering every ounce of strength, ${e} unleashes a mighty swing, aiming to deliver a crushing blow. However, their opponent is no stranger to the art of combat. With an instinctual maneuver, the opponent expertly parries the ${e}\u2019s attack, turning the forceful strike into a mere glancing blow. The arena rumbles with the sound of clashing steel, as the ${e} finds themselves momentarily exposed and on the defensive, forced to react swiftly to the opponent's ensuing assault`},moveRight:e=>`${e} steps to the right`,moveLeft:e=>`${e} steps to the left`,rest:e=>`Sensing the ebb and flow of battle, ${e} takes a moment to catch their breath, seeking respite in the midst of combat. Gladiator\u2019s muscles tense and relax as they regain focus, rejuvenating their stamina for the challenges that lie ahead`};var d=s(2270),h=s(9126),u=s(7280),m=s(184);const p=e=>{let{user:t,userIndex:s,health:a,energy:i}=e;return(0,m.jsxs)("div",{className:`battle_user${s}`,children:[(0,m.jsxs)("div",{className:"battle_data",children:[(0,m.jsx)("div",{className:"battle_user",children:(0,m.jsxs)("div",{className:"battle_name",children:[(0,m.jsx)("p",{children:null===t||void 0===t?void 0:t.name}),(0,m.jsxs)("p",{children:[(0,m.jsx)("span",{children:"Level"}),(0,m.jsx)("span",{children:"1"})]})]})}),(0,m.jsxs)("div",{className:"battle_armour",children:[(0,m.jsx)("span",{children:"Armour"}),(0,m.jsx)("span",{children:"0"})]}),(0,m.jsxs)("div",{className:"battle_stats",children:[(0,m.jsxs)("p",{children:[(0,m.jsx)("span",{children:"Strength"}),(0,m.jsx)("span",{children:null===t||void 0===t?void 0:t.attributes.strength})]}),(0,m.jsxs)("p",{children:[(0,m.jsx)("span",{children:"Agility"}),(0,m.jsx)("span",{children:null===t||void 0===t?void 0:t.attributes.agility})]}),(0,m.jsxs)("p",{children:[(0,m.jsx)("span",{children:"Vitality"}),(0,m.jsx)("span",{children:null===t||void 0===t?void 0:t.attributes.vitality})]}),(0,m.jsxs)("p",{children:[(0,m.jsx)("span",{children:"Stamina"}),(0,m.jsx)("span",{children:null===t||void 0===t?void 0:t.attributes.stamina})]})]})]}),(0,m.jsxs)("div",{className:"battle_equip",children:[(0,m.jsx)(d.u,{health:a,energy:i}),(0,m.jsx)("div",{className:"img_wrapper",children:["lock_img1","lock_img2","lock_img3","lock_img4","lock_img5","char_svg","lock_img6","lock_img7","lock_img8","lock_img9"].map((e=>(0,m.jsx)("img",{className:e,src:e.startsWith("lock")?h.Z:u.Z,alt:e},e)))})]})]})};var g=s(6299);const b=()=>{var e,t,s;const d=JSON.parse(null!==(e=localStorage.getItem("usersOnQueue"))&&void 0!==e?e:"[]"),h=JSON.parse(null!==(t=localStorage.getItem("battleLog"))&&void 0!==t?t:"[]"),[u,b]=(0,a.useState)(0),[v,x]=(0,a.useState)(0),j=(0,a.useMemo)((()=>{const e=h.logs[u];let t=0,s="move"in e.turns[1]?e.turns[1].move.position:0,a=0,i=0;const l=e.turns.map(((l,n)=>{const r=Object.keys(l)[0],c=n%2===0?e.c1:e.c2;if("move"in l){const{position:e}=l.move;n%2===0?t=e:s=e}if("attack"in l){const{damage:e}=l.attack;n%2===0?a+=e:i+=e}return{action:r,pl1SumAttacked:a,pl2SumAttacked:i,pl2Pos:"move"===r&&n%2!==0?Object.values(l)[0].position:s,pl1Pos:"move"===r&&n%2===0?Object.values(l)[0].position:t,isPl1Turn:n%2===0,isAttack:"attack"===r,isMiss:"miss"===r,isMove:"move"===r,isRest:"rest"===r,value:Object.values(l)[0],id:c}}));return{plId1:e.c1,plId2:e.c2,battleWinner:e.winner,turns:l}}),[h,u]),[k,f]=(0,a.useMemo)((()=>{const e=h.logs[u];return d&&e?[d[e.c1],d[e.c2]]:[]}),[h.logs,u,d]),_=30*d[j.plId1].attributes.vitality+10-j.turns[v].pl2SumAttacked>0?30*d[j.plId1].attributes.vitality+10-j.turns[v].pl2SumAttacked:0,w=30*d[j.plId2].attributes.vitality+10-j.turns[v].pl1SumAttacked>0?30*d[j.plId2].attributes.vitality+10-j.turns[v].pl1SumAttacked:0;return(0,m.jsxs)("div",{className:"battle",children:[(0,m.jsxs)("h2",{className:"battle_winner_info",children:["\u2116",u+1," ",j.battleWinner===j.plId1?null===k||void 0===k?void 0:k.name:null===f||void 0===f?void 0:f.name," ","won"]}),(0,m.jsxs)("div",{className:"battle_users",children:[(0,m.jsx)(p,{user:k,userIndex:1,health:_,energy:(0,g.JJ)(k.attributes.stamina)}),(0,m.jsx)(p,{user:f,userIndex:2,health:w,energy:(0,g.JJ)(f.attributes.stamina)})]}),(0,m.jsxs)("div",{className:"battle_actions",children:[(0,m.jsxs)(c.z,{disabled:h.logs.length<=1,className:"battle_button prev",onClick:()=>{const e=h.logs.length;x(0),b((t=>0===t?e-1:t-1))},children:[(0,m.jsx)("img",{src:r,alt:" Previous battle"})," Previous battle"]}),(0,m.jsx)(c.z,{className:"battle_button step_left",onClick:()=>{x((e=>0===e?e:e-1))},children:(0,m.jsx)("img",{src:i,alt:"Step back"})}),(0,m.jsx)(c.z,{disabled:!0,className:"battle_button play",onClick:()=>{},children:"Play battle"}),(0,m.jsx)(c.z,{className:"battle_button step_right",onClick:()=>{x((e=>e+1===j.turns.length?e:e+1))},children:(0,m.jsx)("img",{src:l,alt:"Step forward"})}),(0,m.jsxs)(c.z,{disabled:h.logs.length<=1,className:"battle_button next",onClick:()=>{const e=h.logs.length;x(0),b((t=>t+1===e?0:t+1))},children:["Next battle",(0,m.jsx)("img",{src:n,alt:"Next battle"})]})]}),(0,m.jsxs)("div",{className:"battle_logs",children:[(0,m.jsx)("div",{className:"battle_line",children:(0,m.jsxs)("div",{className:"battle_area",children:[(0,m.jsx)("div",{className:"battle_line_user1",style:{left:5*j.turns[v].pl1Pos+1+"%"}}),(0,m.jsx)("div",{className:"battle_line_user2",style:{left:5*j.turns[v].pl2Pos+1+"%"}}),(0,m.jsx)("div",{className:"battle_axis"})]})}),(0,m.jsx)("table",{className:"battle_logs_content",children:(null!==(s=j.turns)&&void 0!==s?s:[]).map(((e,t,s)=>{const{isPl1Turn:a,isMove:i,isAttack:l,isMiss:n,isRest:r,value:c}=e,h=d[e.id].name;return(0,m.jsxs)("tr",{className:"battle_log "+(t===v?"active":""),children:[(0,m.jsx)("td",{children:(0,m.jsx)("center",{children:t+1})}),(0,m.jsx)("td",{className:"battle_player_name",children:` ${h}`}),(0,m.jsx)("td",{className:"battle_turn_type",children:(0,m.jsx)("center",{children:i?"Move":l?"Attack":n?"Miss":""})}),i?(0,m.jsx)("td",{children:o[a?"moveRight":"moveLeft"](h)}):l?(0,m.jsxs)("td",{children:[o.normalAttack.success(h),(0,m.jsx)("br",{}),"Damage: ","damage"in c?c.damage:0]}):n?(0,m.jsx)("td",{children:o.normalAttack.fail(h)}):r?(0,m.jsx)("td",{children:o.rest(h)}):(0,m.jsx)("td",{})]})}))})]})]})}}}]);
//# sourceMappingURL=267.b0b0f902.chunk.js.map