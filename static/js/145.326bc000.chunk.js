"use strict";(self.webpackChunkdapp=self.webpackChunkdapp||[]).push([[145],{8311:(e,n,t)=>{t.d(n,{AX:()=>c,C7:()=>d,iV:()=>o});var a=t(3675),s=t(6070),r=t(3051),l=t(9664);(0,s.B)("\n  query AllCharacters {\n    characters {\n      id\n      level\n      name\n      owner\n      experience\n      attributes\n    }\n  }\n");const i=(0,s.B)("\n  query CharactersByOwner($owner_eq: String!) {\n    characters(where: { owner_eq: $owner_eq }) {\n      id\n      level\n      name\n      owner\n      experience\n      attributes\n    }\n  }\n"),o=()=>{const e=(0,r.P)(i);l.E.invalidateQueries({queryKey:[e]})},c=e=>{let{owner_eq:n}=e;return(0,r.a)(i,{owner_eq:n})},d=()=>{var e;const{account:n}=(0,a.mA)(),t=c({owner_eq:null!==(e=null===n||void 0===n?void 0:n.decodedAddress)&&void 0!==e?e:""}),s=t.data;return{...t,data:null===s||void 0===s?void 0:s.characters[(null===s||void 0===s?void 0:s.characters.length)-1]}};(0,s.B)("\n  query CharacterById($character_id: String!) {\n    characterById(id: $character_id) {\n      attributes\n      experience\n      id\n      level\n      name\n      owner\n    }\n  }\n")},703:(e,n,t)=>{t.d(n,{z:()=>r});t(2791);var a=t(8182),s=t(184);const r=e=>{let{onClick:n,children:t,disabled:r,buttonProps:l,className:i}=e;const o=(0,a.Z)("button",i,{disabled:r});return(0,s.jsx)("button",{...l,className:o,onClick:n,disabled:r,children:t})}},8906:(e,n,t)=>{t.d(n,{H:()=>v});var a=t(9196),s=t(1590),r=t(2791),l=t(6299),i=t(3675),o=t(2831);const c="StrategyInput_input__kyDv8",d="StrategyInput_options__Re18C",u="StrategyInput_option__oPkTR",m="StrategyInput_dropdown__nTKGG";var h=t(184),p=t(9778).lW;const v=e=>{let{codeId:n,setCodeId:t,onUploadCodeChange:v}=e;const x=(0,i.VY)(),g=(0,a._h)(),[f,j]=r.useState((0,o.pX)()),y=r.useMemo((()=>f.map(((e,n)=>({value:e,label:`${e===l.Ii?"Default Strategy":`Strategy ${n+1}`}: ${e.substring(0,8)}...`})))),[f]),C=r.useRef(null);return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(s.P,{data:[...y,{value:"upload",label:"+ Upload code"}],value:n,onChange:e=>{"upload"!==e?t(e):C.current&&C.current.click()},placeholder:"Select items",nothingFoundMessage:"Nothing found",classNames:{input:c,options:d,option:u,dropdown:m}}),(0,h.jsx)("input",{type:"file",onChange:async e=>{var n;const a=new FileReader;null!==(n=e.target.files)&&void 0!==n&&n[0]?(a.readAsArrayBuffer(e.target.files[0]),a.onload=async e=>{const n=a.result;if(n){const e=p.from(n);await g({optBuffer:e,name:"test",metaHex:void 0,resolve:e=>{console.log("upload code resolved for codeId ",e),t(e),v(e),j((0,o.pX)())}})}}):x.error("No file selected")},className:"input_file",ref:C,style:{display:"none"}})]})}},205:(e,n,t)=>{t.d(n,{I:()=>r});var a=t(2791),s=t(184);const r=(0,a.memo)((e=>{let{inputProps:n,onChange:t,value:a,placeholder:r,name:l}=e;return(0,s.jsx)("div",{className:"input_container",children:(0,s.jsx)("input",{...n,className:"input",onChange:t,value:a,placeholder:r,name:l})})}))},8624:(e,n,t)=>{t.d(n,{e:()=>r});var a=t(3675),s=t(6299);const r=()=>{const{getFormattedBalanceValue:e}=(0,a.Nr)(),{isVoucherExists:n,voucherBalance:t,isVoucherReady:r}=(0,a.zO)(s.ZB),l=t&&e(t.toString()).toFixed();return r&&n&&l>10}},2270:(e,n,t)=>{t.d(n,{u:()=>r});t(2791);var a=t(6299),s=t(184);const r=e=>{let{lives:n,health:t,healthMax:r,energy:l,energyMax:i}=e;const o=r?(null!==t&&void 0!==t?t:0)/r*100:100,c=i?(null!==l&&void 0!==l?l:0)/i*100:100;let d=[];return null!=n&&(d=Array(a.Oo).fill(null).map(((e,t)=>t+1>n?(0,s.jsx)("div",{className:"lifeIndicator empty"},t):(0,s.jsx)("div",{className:"lifeIndicator"},t)))),(0,s.jsxs)("div",{className:"outer-wrapper",children:[null!=n&&(0,s.jsxs)("div",{className:"flex-container",children:[(0,s.jsx)("div",{className:"elem1 leftText",children:"Lives"}),(0,s.jsx)("div",{className:"elem2 livesContainer",children:d}),(0,s.jsxs)("div",{className:"elem3 elem_number",children:[n,"/5"]})]}),(0,s.jsxs)("div",{className:"flex-container",children:[(0,s.jsx)("div",{className:"elem1 leftText",children:"Health"}),(0,s.jsx)("div",{className:"elem2 healthBar",children:(0,s.jsx)("div",{className:"healthBarInner",style:{maxWidth:`${o}%`}})}),(0,s.jsx)("div",{className:"elem3 elem_number",children:r?`${t}/${r}`:t})]}),(0,s.jsxs)("div",{className:"flex-container",children:[(0,s.jsx)("div",{className:"elem1 leftText",children:"Energy"}),(0,s.jsx)("div",{className:"elem2 energyBar",children:(0,s.jsx)("div",{className:"energyBarInner",style:{maxWidth:`${c}%`}})}),(0,s.jsx)("div",{className:"elem3 elem_number",children:i?`${l}/${i}`:l})]})]})}},1353:(e,n,t)=>{t.d(n,{Z:()=>l});var a=t(3675),s=t(2791),r=t(9778).lW;const l=e=>{const n=(0,a.VY)(),[t,l]=(0,s.useState)();return(0,s.useEffect)((()=>{e&&fetch(e).then((e=>e.arrayBuffer())).then((e=>r.from(e))).then((e=>l(e))).catch((e=>{let{message:t}=e;return n.error(`Fetch error: ${t}`)}))}),[n,e]),{buffer:t}}},2145:(e,n,t)=>{t.r(n),t.d(n,{MintCharacter:()=>z});var a=t(2791),s=t(3675),r=t(2529),l=t(9702),i=t(950);const o=(0,i.MT)(null),c=(0,i.yM)();(0,i.UP)({clock:c,target:o});const d={$user:o,setName:c};var u=t(9312),m=t(205),h=t(703),p=t(8501),v=t(7065),x=t(184);const g=e=>{let{firstButton:n,value:t,secondButton:a,leftText:s,onClickFirstButton:r,onClickSecondButton:l,isFirstDisabled:i=!1,isSecondDisabled:o=!1}=e;return(0,x.jsxs)("div",{className:"pointButtonWrapper",children:[(0,x.jsx)("div",{className:"buttonText",children:s}),(0,x.jsxs)(p.z.Group,{children:[r&&(0,x.jsx)(p.z,{className:"pointButton",onClick:r,disabled:i,children:n}),(0,x.jsx)(v.k,{align:"center",justify:"center",style:{cursor:"default"},className:"pointButton secondBtn",children:t}),l&&(0,x.jsx)(p.z,{className:"pointButton",onClick:l,disabled:o,children:a})]})]})};var f=t(2270),j=t(905),y=t(245),C=t(7230),N=t(2765),b=t(5596);const _=e=>{let{children:n,quoteUrl:t}=e;return(0,x.jsxs)("div",{children:[(0,x.jsx)(N.x,{component:"span",c:"white",fw:"600",fz:18,children:n}),t&&(0,x.jsx)(b.e,{ml:4,target:"_blank",rel:"noopener",href:t,children:"[?]"})]})};var B=t(3131),I=t.n(B),w=t(8906),k=t(6299);const S=(0,a.memo)((e=>{let{stats:n,decrease:t,increase:s,disabled:r,onSubmit:l,onChange:i,onShoolOfMagicChange:o,onUploadCodeChange:c,name:d,codeId:u,setCodeId:p}=e;const v=(0,a.useRef)({...n});return(0,x.jsx)("div",{className:"mint_char",children:(0,x.jsxs)(j.i,{className:"table_container",children:[(0,x.jsx)("div",{className:"table_header",children:"Mint character to proceed"}),(0,x.jsxs)("div",{className:"modal_wrapper",children:[(0,x.jsxs)("div",{className:"modal_left",children:[(0,x.jsxs)("div",{className:"top_wrapper",children:[(0,x.jsx)(_,{quoteUrl:"https://impulse-dao.gitbook.io/impulse-dao/games-for-developers/arena",children:"Character info"}),(0,x.jsx)(m.I,{className:"input_container",onChange:i,value:d,placeholder:"Enter character name",name:"name"}),(0,x.jsx)(w.H,{codeId:u,setCodeId:p,onUploadCodeChange:c})]}),(0,x.jsx)(M,{points:n.points}),["strength","agility","vitality","stamina","intelligence"].map((e=>(0,x.jsx)(g,{leftText:I()(e),firstButton:"-",value:n[e],secondButton:"+",onClickFirstButton:()=>t(e),onClickSecondButton:()=>s(e),isFirstDisabled:n[e]===v.current[e],isSecondDisabled:0===n.points},e)))]}),(0,x.jsx)("div",{className:"modal_right",children:(0,x.jsx)(y.x,{pt:"2.5rem",mb:"2rem",children:(0,x.jsx)(f.u,{health:(0,k.K4)(n.vitality),energy:(0,k.JJ)(n.stamina)})})})]}),(0,x.jsxs)("div",{className:"buttonsGrid",children:[(0,x.jsx)(h.z,{className:"cancelButton",onClick:()=>{},children:"Cancel"}),(0,x.jsxs)(h.z,{className:"mintButton",onClick:l,disabled:r,children:["Mint character",(0,x.jsx)(C.C,{component:"span",c:"white",styles:{root:{backgroundColor:"#484848",pointerEvents:"none"}},children:"100 vara"})]}),(0,x.jsx)("div",{className:"textWrapper",children:"75% is added to this season's prize pool"})]})]})})})),M=e=>{let{points:n}=e;return(0,x.jsxs)("div",{className:"points",children:["Points left:",(0,x.jsx)("span",{children:n})," "]})};var $=t(1353),q=t(7689),A=t(8311),F=t(8624);var V=t(9196);const z=(0,a.memo)((()=>{var e;const{buffer:n}=(0,$.Z)(u),t=(0,r.eY)(d.setName),{account:i}=(0,s.mA)(),o=(0,a.useMemo)((()=>l.Pj.from(k.cV)),[]),c=(0,a.useMemo)((()=>({programId:k.ZB,programMetadata:o,wasm:n,functionName:"character_info",argument:null===i||void 0===i?void 0:i.decodedAddress})),[o,n,null===i||void 0===i?void 0:i.decodedAddress]),m=(0,s.J1)(c),[h,p]=(0,a.useState)({codeId:null!==(e=(0,V.pX)()[0])&&void 0!==e?e:"",name:""}),{decrease:v,increase:g,stats:f}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{strength:1,agility:1,vitality:1,stamina:1,intelligence:1,points:5};const[n,t]=(0,a.useState)(e);return{decrease:e=>{n[e]>1&&t((n=>({...n,[e]:n[e]-1,points:n.points+1})))},increase:e=>{n.points>0&&t((n=>({...n,[e]:n[e]+1,points:n.points-1})))},stats:n}}(),j=(e=>{let{codeId:n,name:t,stats:r,onSuccess:i}=e;const o=(0,a.useRef)(i);o.current=i;const c=(0,F.e)(),d=(0,a.useMemo)((()=>l.Pj.from(k.cV)),[]),u=(0,s.$3)(k.ZB,d,{isMaxGasLimit:!0}),m=(0,q.s0)();return(0,a.useCallback)((async()=>{const e={CreateCharacter:{code_id:n,attributes:{agility:r.agility,stamina:r.stamina,strength:r.strength,vitality:r.vitality,intelligence:r.intelligence},name:t}};u({payload:e,gasLimit:k.yQ,withVoucher:c,onSuccess:e=>{var n;console.log("success",e),null===(n=o.current)||void 0===n||n.call(o),(0,A.iV)(),m("/arena")},onError:()=>{console.log("error")},value:k.H5})}),[n,t,m,u,c,r])})({...h,stats:f}),y=(e=>(0,a.useCallback)((n=>{let{target:t}=n;e((e=>({...e,[t.name]:t.value})))}),[e]))(p);return(0,a.useEffect)((()=>{m.state&&t(m.state)}),[m.state,t]),(0,x.jsx)(S,{codeId:h.codeId,setCodeId:e=>p({...h,codeId:e}),name:h.name,disabled:!!f.points||!h.name,decrease:v,increase:g,onChange:y,onSubmit:j,onShoolOfMagicChange:e=>{},onUploadCodeChange:e=>p({...h,codeId:e}),stats:f})}))},9312:(e,n,t)=>{e.exports=t.p+"static/media/mint.opt.35641af53a9250304f5b.wasm"}}]);
//# sourceMappingURL=145.326bc000.chunk.js.map