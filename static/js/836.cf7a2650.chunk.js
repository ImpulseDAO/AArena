"use strict";(self.webpackChunkvara_arena=self.webpackChunkvara_arena||[]).push([[836],{2174:(e,t,a)=>{a.d(t,{L:()=>c,S9:()=>d,_H:()=>o,kw:()=>h});a(9664);var n=a(7613),r=a(6070);const l=(0,r.B)("\n  query BattleLogs {\n    battleLogs {\n      id\n      battleIndex\n      character1 {\n        winner\n        attributes\n        character\n        experience\n        rating\n        level\n      }\n      character2 {\n        winner\n        attributes\n        experience\n        character\n        level\n        rating\n      }\n      lobby {\n        id\n        characters {\n          id\n          character {\n            owner\n            name\n            level\n            experience\n            attributes\n            id\n          }\n        }\n        capacity\n      }\n      turns {\n        character1 {\n          energy\n          hp\n          position\n        }\n        logs {\n          action\n          character\n        }\n        character2 {\n          energy\n          position\n          hp\n        }\n      }\n    }\n  }\n"),o=()=>(0,n.a)(l,void 0,{select:e=>e.battleLogs}),i=(0,r.B)("\n  query BattleLogById($battleId: String!) {\n    battleLogById(id: $battleId) {\n      id\n      battleIndex\n      character1 {\n        winner\n        attributes\n        character\n        experience\n        rating\n        level\n      }\n      character2 {\n        winner\n        attributes\n        experience\n        character\n        level\n        rating\n      }\n      lobby {\n        id\n        characters {\n          id\n          character {\n            owner\n            name\n            level\n            experience\n            attributes\n            id\n          }\n        }\n        capacity\n      }\n      turns {\n        character1 {\n          energy\n          hp\n          position\n        }\n        logs {\n          action\n          character\n        }\n        character2 {\n          energy\n          position\n          hp\n        }\n      }\n    }\n  }\n"),c=e=>{let{battleId:t}=e;return(0,n.a)(i,{battleId:`${t}`},{enabled:null!=t,select:e=>e.battleLogById,placeholderData:e=>e})},s=(0,r.B)("\n  query BattleLogsByLobbyId($lobbyId: String!) {\n    battleLogs(where: { lobby: { id_eq: $lobbyId } }) {\n      id\n    }\n  }\n"),d=e=>{let{lobbyId:t}=e;return(0,n.a)(s,{lobbyId:`${t}`},{enabled:null!=t,select:e=>e.battleLogs})},h=(e,t)=>{var a;return null===(a=e.lobby.characters.find((e=>{let{character:{id:a}}=e;return a===t})))||void 0===a?void 0:a.character}},3836:(e,t,a)=>{a.r(t),a.d(t,{History:()=>u});var n=a(2174),r=a(7065),l=a(8769),o=a(9032),i=a(7689),c=a(1087),s=a(2791),d=a(8311),h=a(1313),b=a(5619),m=a(184);const u=()=>{var e;const t=(0,i.s0)(),a=(0,h.i)(),{data:u}=(0,d.AX)({owner_eq:null!==a&&void 0!==a?a:""}),{data:v}=(0,n._H)(),[g,w]=(0,c.lr)(),f="true"===g.get("filtered");(0,s.useEffect)((()=>{g.get("filtered")||w("filtered=true")}),[]);const x=s.useMemo((()=>{var e;if(!f)return v;const t=null!==(e=null===u||void 0===u?void 0:u.characters.map((e=>e.id)))&&void 0!==e?e:[];return null===v||void 0===v?void 0:v.filter((e=>t.includes(e.character1.character)||t.includes(e.character2.character)))}),[v,f,null===u||void 0===u?void 0:u.characters]),S=null!==(e=null===x||void 0===x?void 0:x.toReversed().map((e=>{const{id:t}=e,r=e.character1.character,l=e.character2.character,o=[r,l].map((t=>{var a,r;return null!==(a=null===(r=(0,n.kw)(e,t))||void 0===r?void 0:r.name)&&void 0!==a?a:"Player not found"})),i=[r,l].map((t=>{var a,r;return null!==(a=null===(r=(0,n.kw)(e,t))||void 0===r?void 0:r.owner)&&void 0!==a?a:"Player not found"})),c=e.character1.winner?(0,n.kw)(e,r):e.character2.winner?(0,n.kw)(e,l):{name:"No winner",owner:""},s=null===c||void 0===c?void 0:c.name,d=null===c||void 0===c?void 0:c.owner,h=i.includes(null!==a&&void 0!==a?a:"")||d&&d===a;return{playersNames:o,battleId:t,lobbyId:e.lobby.id,winner:s,includesMyCharacter:h}})))&&void 0!==e?e:[];return(0,m.jsx)("div",{className:"logs",children:(0,m.jsxs)("div",{className:"modal_leaderboard",children:[(0,m.jsx)(r.k,{style:{alignSelf:"stretch"},mb:"xs",children:(0,m.jsx)(b.k,{size:"sm",bg:"black",onClick:()=>w((e=>{const t=new URLSearchParams(e);return t.set("filtered",f?"false":"true"),t})),children:f?"Show all logs":"Show my logs only"})}),(0,m.jsx)("div",{className:"header",children:"History"}),(0,m.jsx)("div",{className:"modal_table",children:(0,m.jsxs)(l.i,{horizontalSpacing:"md",verticalSpacing:"md",children:[(0,m.jsx)(l.i.Thead,{children:(0,m.jsx)(l.i.Tr,{children:["Lobby ID","Battle ID","Players","Winner"].map(((e,t)=>(0,m.jsx)(l.i.Th,{w:p[t],ta:y[t],children:e},e)))})}),(0,m.jsx)(l.i.Tbody,{children:S.map((e=>(0,m.jsx)(l.i.Tr,{onClick:()=>{const[a,n]=e.battleId.split("-");t(o._.tournamentResult({lobbyId:a,battleId:n}))},className:["table_row",e.includesMyCharacter&&!f?"table_row_highlighted":""].join(" "),children:[(0,m.jsxs)("div",{className:"badge",children:[" ",e.lobbyId]}),(0,m.jsx)("div",{className:"badge",children:e.battleId}),e.playersNames.map((e=>(0,m.jsx)("div",{children:e},e))),e.winner].map(((e,t)=>(0,m.jsx)(l.i.Td,{w:p[t],ta:y[t],children:e},t)))},`${e.battleId}-${e.lobbyId}`)))})]})})]})})},p={0:"100px",1:"100px"},y={0:"center",1:"center"}},8769:(e,t,a)=>{a.d(t,{i:()=>L});var n=a(2791),r=a(2020),l=a(5146),o=a(5838),i=a(3768),c=a(6519),s=a(204),d=a(245),h=a(8592),b=a(4799);const[m,u]=(0,b.R)("Table component was not found in the tree");var p={table:"m-b23fa0ef",th:"m-4e7aa4f3",tr:"m-4e7aa4fd",td:"m-4e7aa4ef",tbody:"m-b2404537",thead:"m-b242d975",caption:"m-9e5a3ac7",scrollContainer:"m-a100c15",scrollContainerInner:"m-62259741"};function y(e,t){if(!t)return;const a={};return t.columnBorder&&e.withColumnBorders&&(a["data-with-column-border"]=!0),t.rowBorder&&e.withRowBorders&&(a["data-with-row-border"]=!0),t.striped&&e.striped&&(a["data-striped"]=e.striped),t.highlightOnHover&&e.highlightOnHover&&(a["data-hover"]=!0),t.captionSide&&e.captionSide&&(a["data-side"]=e.captionSide),t.stickyHeader&&e.stickyHeader&&(a["data-sticky"]=!0),a}function v(e,t){const a=`Table${e.charAt(0).toUpperCase()}${e.slice(1)}`,r=(0,h.d)(((r,l)=>{const o=(0,c.w)(a,{},r),{classNames:i,className:s,style:h,styles:b,...m}=o,p=u();return n.createElement(d.x,{component:e,ref:l,...y(p,t),...p.getStyles(e,{className:s,classNames:i,style:h,styles:b,props:o}),...m})}));return r.displayName=`@mantine/core/${a}`,r.classes=p,r}const g=v("th",{columnBorder:!0}),w=v("td",{columnBorder:!0}),f=v("tr",{rowBorder:!0,striped:!0,highlightOnHover:!0}),x=v("thead",{stickyHeader:!0}),S=v("tbody"),k=v("tfoot"),C=v("caption",{captionSide:!0});function I(e){let{data:t}=e;return n.createElement(n.Fragment,null,t.caption&&n.createElement(C,null,t.caption),t.head&&n.createElement(x,null,n.createElement(f,null,t.head.map(((e,t)=>n.createElement(g,{key:t},e))))),t.body&&n.createElement(S,null,t.body.map(((e,t)=>n.createElement(f,{key:t},e.map(((e,t)=>n.createElement(w,{key:t},e))))))),t.foot&&n.createElement(k,null,n.createElement(f,null,t.foot.map(((e,t)=>n.createElement(g,{key:t},e))))))}I.displayName="@mantine/core/TableDataRenderer";var N=a(1619);const B={type:"scrollarea"},T=(0,o.Z)(((e,t)=>{let{minWidth:a,type:n}=t;return{scrollContainer:{"--table-min-width":(0,r.h)(a),"--table-overflow":"native"===n?"auto":void 0}}})),H=(0,h.d)(((e,t)=>{const a=(0,c.w)("TableScrollContainer",B,e),{classNames:r,className:l,style:o,styles:i,unstyled:h,vars:b,children:m,minWidth:u,type:y,...v}=a,g=(0,s.y)({name:"TableScrollContainer",classes:p,props:a,className:l,style:o,classNames:r,styles:i,unstyled:h,vars:b,varsResolver:T,rootSelector:"scrollContainer"});return n.createElement(d.x,{component:"scrollarea"===y?N.x:"div",..."scrollarea"===y?{offsetScrollbars:"x"}:{},ref:t,...g("scrollContainer"),...v},n.createElement("div",{...g("scrollContainerInner")},m))}));H.classes=p,H.displayName="@mantine/core/TableScrollContainer";const E={withRowBorders:!0,verticalSpacing:7},j=(0,o.Z)(((e,t)=>{let{layout:a,captionSide:n,horizontalSpacing:o,verticalSpacing:c,borderColor:s,stripedColor:d,highlightOnHoverColor:h,striped:b,highlightOnHover:m,stickyHeaderOffset:u,stickyHeader:p}=t;return{table:{"--table-layout":a,"--table-caption-side":n,"--table-horizontal-spacing":(0,l.bG)(o),"--table-vertical-spacing":(0,l.bG)(c),"--table-border-color":s?(0,i.p)(s,e):void 0,"--table-striped-color":b&&d?(0,i.p)(d,e):void 0,"--table-highlight-on-hover-color":m&&h?(0,i.p)(h,e):void 0,"--table-sticky-header-offset":p?(0,r.h)(u):void 0}}})),L=(0,h.d)(((e,t)=>{const a=(0,c.w)("Table",E,e),{classNames:r,className:l,style:o,styles:i,unstyled:h,vars:b,horizontalSpacing:u,verticalSpacing:y,captionSide:v,stripedColor:g,highlightOnHoverColor:w,striped:f,highlightOnHover:x,withColumnBorders:S,withRowBorders:k,withTableBorder:C,borderColor:N,layout:B,variant:T,data:H,children:L,stickyHeader:R,stickyHeaderOffset:_,...$}=a,O=(0,s.y)({name:"Table",props:a,className:l,style:o,classes:p,classNames:r,styles:i,unstyled:h,rootSelector:"table",vars:b,varsResolver:j});return n.createElement(m,{value:{getStyles:O,stickyHeader:R,striped:!0===f?"odd":f||void 0,highlightOnHover:x,withColumnBorders:S,withRowBorders:k,captionSide:v||"bottom"}},n.createElement(d.x,{component:"table",variant:T,ref:t,mod:{"data-with-table-border":C},...O("table"),...$},L||!!H&&n.createElement(I,{data:H})))}));L.classes=p,L.displayName="@mantine/core/Table",L.Td=w,L.Th=g,L.Tr=f,L.Thead=x,L.Tbody=S,L.Tfoot=k,L.Caption=C,L.ScrollContainer=H,L.DataRenderer=I}}]);
//# sourceMappingURL=836.cf7a2650.chunk.js.map