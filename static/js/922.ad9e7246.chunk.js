(self.webpackChunkvara_arena=self.webpackChunkvara_arena||[]).push([[922],{2174:(e,r,t)=>{"use strict";t.d(r,{L:()=>s,S9:()=>d,_H:()=>l,kw:()=>h});t(9664);var n=t(7613),a=t(6070);const o=(0,a.B)("\n  query BattleLogs {\n    battleLogs {\n      id\n      battleIndex\n      character1 {\n        winner\n        attributes\n        character\n        experience\n        rating\n        level\n      }\n      character2 {\n        winner\n        attributes\n        experience\n        character\n        level\n        rating\n      }\n      lobby {\n        id\n        tier\n        capacity\n        reservationsCount\n        characters {\n          id\n          character {\n            owner\n            name\n            level\n            experience\n            attributes\n            id\n          }\n        }\n      }\n      turns {\n        character1 {\n          energy\n          hp\n          position\n        }\n        logs {\n          action\n          character\n        }\n        character2 {\n          energy\n          position\n          hp\n        }\n      }\n    }\n  }\n"),l=()=>(0,n.a)(o,void 0,{select:e=>e.battleLogs}),i=(0,a.B)("\n  query BattleLogById($battleId: String!) {\n    battleLogById(id: $battleId) {\n      id\n      battleIndex\n      character1 {\n        winner\n        attributes\n        character\n        experience\n        rating\n        level\n      }\n      character2 {\n        winner\n        attributes\n        experience\n        character\n        level\n        rating\n      }\n      lobby {\n        id\n        tier\n        reservationsCount\n        capacity\n        characters {\n          id\n          character {\n            owner\n            name\n            level\n            experience\n            attributes\n            id\n          }\n        }\n      }\n      turns {\n        character1 {\n          energy\n          hp\n          position\n\n          chillingTouch\n          earthSkin\n          earthSmites\n          fireHaste\n          fireWall\n          waterBurst\n        }\n        logs {\n          action\n          character\n        }\n        character2 {\n          energy\n          position\n          hp\n\n          chillingTouch\n          earthSkin\n          earthSmites\n          fireHaste\n          fireWall\n          waterBurst\n        }\n      }\n    }\n  }\n"),s=e=>{let{battleId:r}=e;return(0,n.a)(i,{battleId:`${r}`},{enabled:null!=r,select:e=>e.battleLogById,placeholderData:e=>e})},c=(0,a.B)("\n  query BattleLogsByLobbyId($lobbyId: String!) {\n    battleLogs(where: { lobby: { id_eq: $lobbyId } }) {\n      id\n    }\n  }\n"),d=e=>{let{lobbyId:r}=e;return(0,n.a)(c,{lobbyId:`${r}`},{enabled:null!=r,select:e=>e.battleLogs})},h=(e,r)=>{var t;return null===(t=e.lobby.characters.find((e=>{let{character:{id:t}}=e;return t===r})))||void 0===t?void 0:t.character}},3922:(e,r,t)=>{"use strict";t.r(r),t.d(r,{History:()=>B});var n=t(763),a=t(2174),o=t(7065),l=t(5413),i=t(2020),s=t(8769),c=t(2765),d=t(2791),h=t(2007),u=t.n(h),p={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"},b=Object.defineProperty,m=Object.defineProperties,y=Object.getOwnPropertyDescriptors,v=Object.getOwnPropertySymbols,g=Object.prototype.hasOwnProperty,f=Object.prototype.propertyIsEnumerable,w=(e,r,t)=>r in e?b(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t,x=(e,r)=>{for(var t in r||(r={}))g.call(r,t)&&w(e,t,r[t]);if(v)for(var t of v(r))f.call(r,t)&&w(e,t,r[t]);return e},k=((e,r,t)=>{const n=(0,d.forwardRef)(((r,n)=>{var a,o=r,{color:l="currentColor",size:i=24,stroke:s=2,children:c}=o,h=((e,r)=>{var t={};for(var n in e)g.call(e,n)&&r.indexOf(n)<0&&(t[n]=e[n]);if(null!=e&&v)for(var n of v(e))r.indexOf(n)<0&&f.call(e,n)&&(t[n]=e[n]);return t})(o,["color","size","stroke","children"]);return(0,d.createElement)("svg",x((a=x({ref:n},p),m(a,y({width:i,height:i,stroke:l,strokeWidth:s,className:`tabler-icon tabler-icon-${e}`}))),h),[...t.map((e=>{let[r,t]=e;return(0,d.createElement)(r,t)})),...c||[]])}));return n.propTypes={color:u().string,size:u().oneOfType([u().string,u().number]),stroke:u().oneOfType([u().string,u().number])},n.displayName=`${r}`,n})("search","IconSearch",[["path",{d:"M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0",key:"svg-0"}],["path",{d:"M21 21l-6 -6",key:"svg-1"}]]),S=t(9032),C=t(7689),T=t(1087),I=t(8311),O=t(1313),j=t(5619),N=t(184);const B=()=>{const e=(0,C.s0)(),r=(0,O.i)(),[t,h]=d.useState(""),{data:u}=(0,I.AX)({owner_eq:null!==r&&void 0!==r?r:""}),{data:p}=(0,a._H)(),[b,m]=(0,T.lr)(),y="true"===b.get("filtered");(0,d.useEffect)((()=>{b.get("filtered")||m("filtered=true")}),[]);const v=d.useMemo((()=>null===p||void 0===p?void 0:p.sort(((e,r)=>parseInt(e.id)-parseInt(r.id)))),[p]),g=d.useMemo((()=>{var e;if(!y)return v;const r=null!==(e=null===u||void 0===u?void 0:u.characters.map((e=>e.id)))&&void 0!==e?e:[];return null===v||void 0===v?void 0:v.filter((e=>r.includes(e.character1.character)||r.includes(e.character2.character)))}),[v,y,null===u||void 0===u?void 0:u.characters]),f=d.useMemo((()=>t?null===g||void 0===g?void 0:g.filter((e=>{if(e.lobby.id.toLowerCase().includes(t.toLowerCase()))return!0;if(e.id.toLowerCase().includes(t.toLowerCase()))return!0;return L(e).some((e=>null===e||void 0===e?void 0:e.name.toLowerCase().includes(t.toLowerCase())))})):g),[g,t]),w=d.useMemo((()=>{var e;return null!==(e=null===f||void 0===f?void 0:f.toReversed().map((e=>{const{id:t}=e,n=L(e),a=n.map((e=>{var r;return null!==(r=null===e||void 0===e?void 0:e.name)&&void 0!==r?r:"Player not found"})),o=n.map((e=>{var r;return null!==(r=null===e||void 0===e?void 0:e.owner)&&void 0!==r?r:"Player not found"})),l=e.character1.winner?n[0]:e.character2.winner?n[1]:{name:"No winner",owner:""},i=null===l||void 0===l?void 0:l.name,s=null===l||void 0===l?void 0:l.owner,c=o.includes(null!==r&&void 0!==r?r:"")||s&&s===r;return{playersNames:a,battleId:t,lobbyId:e.lobby.id,tier:e.lobby.tier,winner:i,includesMyCharacter:c}})))&&void 0!==e?e:[]}),[f,r]),x="200px";return(0,N.jsx)("div",{className:"logs",children:(0,N.jsxs)("div",{className:"modal_leaderboard",children:[(0,N.jsxs)(o.k,{style:{alignSelf:"stretch"},mb:"xs",justify:"space-between",w:"100%",children:[(0,N.jsx)(j.k,{w:x,size:"sm",bg:"black",onClick:()=>m((e=>{const r=new URLSearchParams(e);return r.set("filtered",y?"false":"true"),r})),children:y?"Show all logs":"Show my logs only"}),(0,N.jsx)(l.o,{w:x,size:"sm",placeholder:"Search...",rightSectionWidth:42,styles:{input:{backgroundColor:"rgba(0, 0, 0, 0.8)",border:"2px solid white",color:"white"}},c:"white",leftSection:(0,N.jsx)(k,{style:{width:(0,i.h)(18),height:(0,i.h)(18)},color:"white",stroke:2.5}),onChange:e=>{(0,n.debounce)((()=>{h(e.target.value)}),300,{maxWait:1e3})()}})]}),(0,N.jsx)("div",{className:"header",children:"History"}),(0,N.jsx)("div",{className:"modal_table",children:(0,N.jsxs)(s.i,{horizontalSpacing:"md",verticalSpacing:"md",children:[(0,N.jsx)(s.i.Thead,{children:(0,N.jsx)(s.i.Tr,{children:["Lobby ID","Battle ID","Tier","Players","Winner"].map(((e,r)=>(0,N.jsx)(s.i.Th,{w:E[r],ta:H[r],children:e},e)))})}),(0,N.jsx)(s.i.Tbody,{children:w.map((r=>(0,N.jsx)(s.i.Tr,{onClick:()=>{const[t,n]=r.battleId.split("-");e(S._.tournamentResult({lobbyId:t,battleId:n}))},className:["table_row",r.includesMyCharacter&&!y?"table_row_highlighted":""].join(" "),children:[(0,N.jsxs)("div",{className:"badge",children:[" ",r.lobbyId]}),(0,N.jsx)("div",{className:"badge",children:r.battleId}),(0,N.jsx)(c.x,{ta:"center",size:"sm",fw:"500",children:r.tier}),r.playersNames.map((e=>(0,N.jsx)("div",{children:e},e))),r.winner].map(((e,r)=>(0,N.jsx)(s.i.Td,{w:E[r],ta:H[r],children:e},r)))},`${r.battleId}-${r.lobbyId}`)))})]})})]})})},E={0:"100px",1:"100px",2:"40px"},H={0:"center",1:"center",2:"center"};function L(e){return[e.character1.character,e.character2.character].map((r=>(0,a.kw)(e,r)))}},888:(e,r,t)=>{"use strict";var n=t(9047);function a(){}function o(){}o.resetWarningCache=a,e.exports=function(){function e(e,r,t,a,o,l){if(l!==n){var i=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw i.name="Invariant Violation",i}}function r(){return e}e.isRequired=e;var t={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:r,element:e,elementType:e,instanceOf:r,node:e,objectOf:r,oneOf:r,oneOfType:r,shape:r,exact:r,checkPropTypes:o,resetWarningCache:a};return t.PropTypes=t,t}},2007:(e,r,t)=>{e.exports=t(888)()},9047:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},8769:(e,r,t)=>{"use strict";t.d(r,{i:()=>H});var n=t(2791),a=t(2020),o=t(5146),l=t(5838),i=t(3768),s=t(6519),c=t(204),d=t(245),h=t(8592),u=t(4799);const[p,b]=(0,u.R)("Table component was not found in the tree");var m={table:"m-b23fa0ef",th:"m-4e7aa4f3",tr:"m-4e7aa4fd",td:"m-4e7aa4ef",tbody:"m-b2404537",thead:"m-b242d975",caption:"m-9e5a3ac7",scrollContainer:"m-a100c15",scrollContainerInner:"m-62259741"};function y(e,r){if(!r)return;const t={};return r.columnBorder&&e.withColumnBorders&&(t["data-with-column-border"]=!0),r.rowBorder&&e.withRowBorders&&(t["data-with-row-border"]=!0),r.striped&&e.striped&&(t["data-striped"]=e.striped),r.highlightOnHover&&e.highlightOnHover&&(t["data-hover"]=!0),r.captionSide&&e.captionSide&&(t["data-side"]=e.captionSide),r.stickyHeader&&e.stickyHeader&&(t["data-sticky"]=!0),t}function v(e,r){const t=`Table${e.charAt(0).toUpperCase()}${e.slice(1)}`,a=(0,h.d)(((a,o)=>{const l=(0,s.w)(t,{},a),{classNames:i,className:c,style:h,styles:u,...p}=l,m=b();return n.createElement(d.x,{component:e,ref:o,...y(m,r),...m.getStyles(e,{className:c,classNames:i,style:h,styles:u,props:l}),...p})}));return a.displayName=`@mantine/core/${t}`,a.classes=m,a}const g=v("th",{columnBorder:!0}),f=v("td",{columnBorder:!0}),w=v("tr",{rowBorder:!0,striped:!0,highlightOnHover:!0}),x=v("thead",{stickyHeader:!0}),k=v("tbody"),S=v("tfoot"),C=v("caption",{captionSide:!0});function T(e){let{data:r}=e;return n.createElement(n.Fragment,null,r.caption&&n.createElement(C,null,r.caption),r.head&&n.createElement(x,null,n.createElement(w,null,r.head.map(((e,r)=>n.createElement(g,{key:r},e))))),r.body&&n.createElement(k,null,r.body.map(((e,r)=>n.createElement(w,{key:r},e.map(((e,r)=>n.createElement(f,{key:r},e))))))),r.foot&&n.createElement(S,null,n.createElement(w,null,r.foot.map(((e,r)=>n.createElement(g,{key:r},e))))))}T.displayName="@mantine/core/TableDataRenderer";var I=t(1619);const O={type:"scrollarea"},j=(0,l.Z)(((e,r)=>{let{minWidth:t,type:n}=r;return{scrollContainer:{"--table-min-width":(0,a.h)(t),"--table-overflow":"native"===n?"auto":void 0}}})),N=(0,h.d)(((e,r)=>{const t=(0,s.w)("TableScrollContainer",O,e),{classNames:a,className:o,style:l,styles:i,unstyled:h,vars:u,children:p,minWidth:b,type:y,...v}=t,g=(0,c.y)({name:"TableScrollContainer",classes:m,props:t,className:o,style:l,classNames:a,styles:i,unstyled:h,vars:u,varsResolver:j,rootSelector:"scrollContainer"});return n.createElement(d.x,{component:"scrollarea"===y?I.x:"div",..."scrollarea"===y?{offsetScrollbars:"x"}:{},ref:r,...g("scrollContainer"),...v},n.createElement("div",{...g("scrollContainerInner")},p))}));N.classes=m,N.displayName="@mantine/core/TableScrollContainer";const B={withRowBorders:!0,verticalSpacing:7},E=(0,l.Z)(((e,r)=>{let{layout:t,captionSide:n,horizontalSpacing:l,verticalSpacing:s,borderColor:c,stripedColor:d,highlightOnHoverColor:h,striped:u,highlightOnHover:p,stickyHeaderOffset:b,stickyHeader:m}=r;return{table:{"--table-layout":t,"--table-caption-side":n,"--table-horizontal-spacing":(0,o.bG)(l),"--table-vertical-spacing":(0,o.bG)(s),"--table-border-color":c?(0,i.p)(c,e):void 0,"--table-striped-color":u&&d?(0,i.p)(d,e):void 0,"--table-highlight-on-hover-color":p&&h?(0,i.p)(h,e):void 0,"--table-sticky-header-offset":m?(0,a.h)(b):void 0}}})),H=(0,h.d)(((e,r)=>{const t=(0,s.w)("Table",B,e),{classNames:a,className:o,style:l,styles:i,unstyled:h,vars:u,horizontalSpacing:b,verticalSpacing:y,captionSide:v,stripedColor:g,highlightOnHoverColor:f,striped:w,highlightOnHover:x,withColumnBorders:k,withRowBorders:S,withTableBorder:C,borderColor:I,layout:O,variant:j,data:N,children:H,stickyHeader:L,stickyHeaderOffset:_,...R}=t,P=(0,c.y)({name:"Table",props:t,className:o,style:l,classes:m,classNames:a,styles:i,unstyled:h,rootSelector:"table",vars:u,varsResolver:E});return n.createElement(p,{value:{getStyles:P,stickyHeader:L,striped:!0===w?"odd":w||void 0,highlightOnHover:x,withColumnBorders:k,withRowBorders:S,captionSide:v||"bottom"}},n.createElement(d.x,{component:"table",variant:j,ref:r,mod:{"data-with-table-border":C},...P("table"),...R},H||!!N&&n.createElement(T,{data:N})))}));H.classes=m,H.displayName="@mantine/core/Table",H.Td=f,H.Th=g,H.Tr=w,H.Thead=x,H.Tbody=k,H.Tfoot=S,H.Caption=C,H.ScrollContainer=N,H.DataRenderer=T}}]);
//# sourceMappingURL=922.ad9e7246.chunk.js.map