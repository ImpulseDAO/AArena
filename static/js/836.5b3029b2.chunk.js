"use strict";(self.webpackChunkdapp=self.webpackChunkdapp||[]).push([[836],{2174:(e,t,n)=>{n.d(t,{L:()=>i,S9:()=>d,_H:()=>l,kw:()=>u});n(9664);var r=n(3051),a=n(6070);const o=(0,a.B)("\n  query BattleLogs {\n    battleLogs {\n      id\n      battleIndex\n      character1 {\n        winner\n        attributes\n        character\n        experience\n        rating\n        level\n      }\n      character2 {\n        winner\n        attributes\n        experience\n        character\n        level\n        rating\n      }\n      lobby {\n        id\n        characters {\n          id\n          character {\n            owner\n            name\n            level\n            experience\n            attributes\n            id\n          }\n        }\n        capacity\n      }\n      turns {\n        character1 {\n          energy\n          hp\n          position\n        }\n        logs {\n          action\n          character\n        }\n        character2 {\n          energy\n          position\n          hp\n        }\n      }\n    }\n  }\n"),l=()=>(0,r.a)(o,void 0,{select:e=>e.battleLogs}),s=(0,a.B)("\n  query BattleLogById($battleId: String!) {\n    battleLogById(id: $battleId) {\n      id\n      battleIndex\n      character1 {\n        winner\n        attributes\n        character\n        experience\n        rating\n        level\n      }\n      character2 {\n        winner\n        attributes\n        experience\n        character\n        level\n        rating\n      }\n      lobby {\n        id\n        characters {\n          id\n          character {\n            owner\n            name\n            level\n            experience\n            attributes\n            id\n          }\n        }\n        capacity\n      }\n      turns {\n        character1 {\n          energy\n          hp\n          position\n        }\n        logs {\n          action\n          character\n        }\n        character2 {\n          energy\n          position\n          hp\n        }\n      }\n    }\n  }\n"),i=e=>{let{battleId:t}=e;return(0,r.a)(s,{battleId:`${t}`},{enabled:null!=t,select:e=>e.battleLogById,placeholderData:e=>e})},c=(0,a.B)("\n  query BattleLogsByLobbyId($lobbyId: String!) {\n    battleLogs(where: { lobby: { id_eq: $lobbyId } }) {\n      id\n    }\n  }\n"),d=e=>{let{lobbyId:t}=e;return(0,r.a)(c,{lobbyId:`${t}`},{enabled:null!=t,select:e=>e.battleLogs})},u=(e,t)=>{var n;return null===(n=e.lobby.characters.find((e=>{let{character:{id:n}}=e;return n===t})))||void 0===n?void 0:n.character}},8311:(e,t,n)=>{n.d(t,{AX:()=>c,C7:()=>d,iV:()=>i});var r=n(3675),a=n(6070),o=n(3051),l=n(9664);(0,a.B)("\n  query AllCharacters {\n    characters {\n      id\n      level\n      name\n      owner\n      experience\n      attributes\n    }\n  }\n");const s=(0,a.B)("\n  query CharactersByOwner($owner_eq: String!) {\n    characters(where: { owner_eq: $owner_eq }) {\n      id\n      level\n      name\n      owner\n      experience\n      attributes\n    }\n  }\n"),i=()=>{const e=(0,o.P)(s);l.E.invalidateQueries({queryKey:[e]})},c=e=>{let{owner_eq:t}=e;return(0,o.a)(s,{owner_eq:t})},d=()=>{var e;const{account:t}=(0,r.mA)(),n=c({owner_eq:null!==(e=null===t||void 0===t?void 0:t.decodedAddress)&&void 0!==e?e:""}),a=n.data;return{...n,data:null===a||void 0===a?void 0:a.characters[(null===a||void 0===a?void 0:a.characters.length)-1]}};(0,a.B)("\n  query CharacterById($character_id: String!) {\n    characterById(id: $character_id) {\n      attributes\n      experience\n      id\n      level\n      name\n      owner\n    }\n  }\n")},5619:(e,t,n)=>{n.d(t,{k:()=>o});var r=n(8501),a=n(184);const o=e=>{let{children:t,onClick:n,...o}=e;return(0,a.jsx)(r.z,{onClick:n,radius:"sm",bg:"primary",size:"md",px:"xl",style:e=>({boxShadow:e.shadows.sm}),styles:e=>({root:{"&:disabled":{backgroundColor:e.colors.gray[5],color:e.colors.gray[6]}}}),...o,children:t})}},1313:(e,t,n)=>{n.d(t,{i:()=>a});var r=n(3675);const a=()=>{const{account:e}=(0,r.mA)();return null===e||void 0===e?void 0:e.decodedAddress}},3836:(e,t,n)=>{n.r(t),n.d(t,{History:()=>b});var r=n(2174),a=n(7065),o=n(905),l=n(9032),s=n(7689),i=n(1087),c=n(2791),d=n(8311),u=n(1313),h=n(5619),m=n(184);const b=()=>{var e;const t=(0,s.s0)(),n=(0,u.i)(),{data:b}=(0,d.AX)({owner_eq:null!==n&&void 0!==n?n:""}),{data:y}=(0,r._H)(),[g,w]=(0,i.lr)(),f="true"===g.get("filtered");(0,c.useEffect)((()=>{g.get("filtered")||w("filtered=true")}),[]);const x=c.useMemo((()=>{var e;if(!f)return y;const t=null!==(e=null===b||void 0===b?void 0:b.characters.map((e=>e.id)))&&void 0!==e?e:[];return null===y||void 0===y?void 0:y.filter((e=>t.includes(e.character1.character)||t.includes(e.character2.character)))}),[y,f,null===b||void 0===b?void 0:b.characters]),N=null!==(e=null===x||void 0===x?void 0:x.toReversed().map((e=>{var t,n;const{id:a}=e,o=e.character1.character,l=e.character2.character;return{playersNames:[o,l].map((t=>{var n,a;return null!==(n=null===(a=(0,r.kw)(e,t))||void 0===a?void 0:a.name)&&void 0!==n?n:"Player not found"})),battleId:a,lobbyId:e.lobby.id,winner:e.character1.winner?null===(t=(0,r.kw)(e,o))||void 0===t?void 0:t.name:e.character2.winner?null===(n=(0,r.kw)(e,l))||void 0===n?void 0:n.name:"No winner"}})))&&void 0!==e?e:[];return(0,m.jsx)("div",{className:"logs",children:(0,m.jsxs)("div",{className:"modal_leaderboard",children:[(0,m.jsx)(a.k,{style:{alignSelf:"stretch"},mb:"xs",children:(0,m.jsx)(h.k,{size:"sm",bg:"black",onClick:()=>w((e=>{const t=new URLSearchParams(e);return t.set("filtered",f?"false":"true"),t})),children:f?"Show all logs":"Show my logs only"})}),(0,m.jsx)("div",{className:"header",children:"History"}),(0,m.jsx)("div",{className:"modal_table",children:(0,m.jsxs)(o.i,{horizontalSpacing:"md",verticalSpacing:"md",children:[(0,m.jsx)(o.i.Thead,{children:(0,m.jsx)(o.i.Tr,{children:["Lobby ID","Battle ID","Players","Winner"].map(((e,t)=>(0,m.jsx)(o.i.Th,{w:p[t],ta:v[t],children:e},e)))})}),(0,m.jsx)(o.i.Tbody,{children:N.map((e=>(0,m.jsx)(o.i.Tr,{onClick:()=>{const[n,r]=e.battleId.split("-");t(l.F.tournamentResult({lobbyId:n,battleId:r}))},className:"table_row",children:[(0,m.jsxs)("div",{className:"badge",children:[" ",e.lobbyId]}),(0,m.jsx)("div",{className:"badge",children:e.battleId}),e.playersNames.map((e=>(0,m.jsx)("div",{children:e}))),e.winner].map(((e,t)=>(0,m.jsx)(o.i.Td,{w:p[t],ta:v[t],children:e},t)))})))})]})})]})})},p={0:"100px",1:"100px"},v={0:"center",1:"center"}},8501:(e,t,n)=>{n.d(t,{z:()=>f});var r=n(2791),a=n(5146),o=n(5838),l=n(6519),s=n(204),i=n(245),c=n(6481),d=n(3715),u=n(3274),h=n(2020),m=n(8592),b={root:"m-77c9d27d",inner:"m-80f1301b",loader:"m-a25b86ee",label:"m-811560b9",section:"m-a74036a",group:"m-80d6d844"};const p={orientation:"horizontal"},v=(0,o.Z)(((e,t)=>{let{borderWidth:n}=t;return{group:{"--button-border-width":(0,h.h)(n)}}})),y=(0,m.d)(((e,t)=>{const n=(0,l.w)("ButtonGroup",p,e),{className:a,style:o,classNames:c,styles:d,unstyled:u,orientation:h,vars:m,borderWidth:y,variant:g,...w}=(0,l.w)("ButtonGroup",p,e),f=(0,s.y)({name:"ButtonGroup",props:n,classes:b,className:a,style:o,classNames:c,styles:d,unstyled:u,vars:m,varsResolver:v,rootSelector:"group"});return r.createElement(i.x,{...f("group"),ref:t,variant:g,mod:{"data-orientation":h},role:"group",...w})}));y.classes=b,y.displayName="@mantine/core/ButtonGroup";const g={},w=(0,o.Z)(((e,t)=>{let{radius:n,color:r,gradient:o,variant:l,size:s,justify:i,autoContrast:c}=t;const d=e.variantColorResolver({color:r||e.primaryColor,theme:e,gradient:o,variant:l||"filled",autoContrast:c});return{root:{"--button-justify":i,"--button-height":(0,a.ap)(s,"button-height"),"--button-padding-x":(0,a.ap)(s,"button-padding-x"),"--button-fz":null!==s&&void 0!==s&&s.includes("compact")?(0,a.yv)(s.replace("compact-","")):(0,a.yv)(s),"--button-radius":void 0===n?void 0:(0,a.H5)(n),"--button-bg":r||l?d.background:void 0,"--button-hover":r||l?d.hover:void 0,"--button-color":d.color,"--button-bd":r||l?d.border:void 0,"--button-hover-color":r||l?d.hoverColor:void 0}}})),f=(0,c.b)(((e,t)=>{const n=(0,l.w)("Button",g,e),{style:a,vars:o,className:c,color:h,disabled:m,children:p,leftSection:v,rightSection:y,fullWidth:f,variant:x,radius:N,loading:B,loaderProps:C,gradient:S,classNames:k,styles:E,unstyled:I,"data-disabled":T,autoContrast:H,...j}=n,_=(0,s.y)({name:"Button",props:n,classes:b,className:c,style:a,classNames:k,styles:E,unstyled:I,vars:o,varsResolver:w}),q=!!v,R=!!y;return r.createElement(u.k,{ref:t,..._("root",{active:!m&&!B&&!T}),unstyled:I,variant:x,disabled:m||B,mod:{disabled:m||T,loading:B,block:f,"with-left-section":q,"with-right-section":R},...j},r.createElement(i.x,{component:"span",..._("loader"),"aria-hidden":!0},r.createElement(d.a,{color:"var(--button-color)",size:"calc(var(--button-height) / 1.8)",...C})),r.createElement("span",{..._("inner")},v&&r.createElement(i.x,{component:"span",..._("section"),mod:{position:"left"}},v),r.createElement(i.x,{component:"span",mod:{loading:B},..._("label")},p),y&&r.createElement(i.x,{component:"span",..._("section"),mod:{position:"right"}},y)))}));f.classes=b,f.displayName="@mantine/core/Button",f.Group=y},905:(e,t,n)=>{n.d(t,{i:()=>_});var r=n(2791),a=n(2020),o=n(5146),l=n(5838),s=n(3768),i=n(6519),c=n(204),d=n(245),u=n(8592),h=n(4799);const[m,b]=(0,h.R)("Table component was not found in the tree");var p={table:"m-b23fa0ef",th:"m-4e7aa4f3",tr:"m-4e7aa4fd",td:"m-4e7aa4ef",tbody:"m-b2404537",thead:"m-b242d975",caption:"m-9e5a3ac7",scrollContainer:"m-a100c15",scrollContainerInner:"m-62259741"};function v(e,t){if(!t)return;const n={};return t.columnBorder&&e.withColumnBorders&&(n["data-with-column-border"]=!0),t.rowBorder&&e.withRowBorders&&(n["data-with-row-border"]=!0),t.striped&&e.striped&&(n["data-striped"]=e.striped),t.highlightOnHover&&e.highlightOnHover&&(n["data-hover"]=!0),t.captionSide&&e.captionSide&&(n["data-side"]=e.captionSide),t.stickyHeader&&e.stickyHeader&&(n["data-sticky"]=!0),n}function y(e,t){const n=`Table${e.charAt(0).toUpperCase()}${e.slice(1)}`,a=(0,u.d)(((a,o)=>{const l=(0,i.w)(n,{},a),{classNames:s,className:c,style:u,styles:h,...m}=l,p=b();return r.createElement(d.x,{component:e,ref:o,...v(p,t),...p.getStyles(e,{className:c,classNames:s,style:u,styles:h,props:l}),...m})}));return a.displayName=`@mantine/core/${n}`,a.classes=p,a}const g=y("th",{columnBorder:!0}),w=y("td",{columnBorder:!0}),f=y("tr",{rowBorder:!0,striped:!0,highlightOnHover:!0}),x=y("thead",{stickyHeader:!0}),N=y("tbody"),B=y("tfoot"),C=y("caption",{captionSide:!0});function S(e){let{data:t}=e;return r.createElement(r.Fragment,null,t.caption&&r.createElement(C,null,t.caption),t.head&&r.createElement(x,null,r.createElement(f,null,t.head.map(((e,t)=>r.createElement(g,{key:t},e))))),t.body&&r.createElement(N,null,t.body.map(((e,t)=>r.createElement(f,{key:t},e.map(((e,t)=>r.createElement(w,{key:t},e))))))),t.foot&&r.createElement(B,null,r.createElement(f,null,t.foot.map(((e,t)=>r.createElement(g,{key:t},e))))))}S.displayName="@mantine/core/TableDataRenderer";var k=n(1619);const E={type:"scrollarea"},I=(0,l.Z)(((e,t)=>{let{minWidth:n,type:r}=t;return{scrollContainer:{"--table-min-width":(0,a.h)(n),"--table-overflow":"native"===r?"auto":void 0}}})),T=(0,u.d)(((e,t)=>{const n=(0,i.w)("TableScrollContainer",E,e),{classNames:a,className:o,style:l,styles:s,unstyled:u,vars:h,children:m,minWidth:b,type:v,...y}=n,g=(0,c.y)({name:"TableScrollContainer",classes:p,props:n,className:o,style:l,classNames:a,styles:s,unstyled:u,vars:h,varsResolver:I,rootSelector:"scrollContainer"});return r.createElement(d.x,{component:"scrollarea"===v?k.x:"div",..."scrollarea"===v?{offsetScrollbars:"x"}:{},ref:t,...g("scrollContainer"),...y},r.createElement("div",{...g("scrollContainerInner")},m))}));T.classes=p,T.displayName="@mantine/core/TableScrollContainer";const H={withRowBorders:!0,verticalSpacing:7},j=(0,l.Z)(((e,t)=>{let{layout:n,captionSide:r,horizontalSpacing:l,verticalSpacing:i,borderColor:c,stripedColor:d,highlightOnHoverColor:u,striped:h,highlightOnHover:m,stickyHeaderOffset:b,stickyHeader:p}=t;return{table:{"--table-layout":n,"--table-caption-side":r,"--table-horizontal-spacing":(0,o.bG)(l),"--table-vertical-spacing":(0,o.bG)(i),"--table-border-color":c?(0,s.p)(c,e):void 0,"--table-striped-color":h&&d?(0,s.p)(d,e):void 0,"--table-highlight-on-hover-color":m&&u?(0,s.p)(u,e):void 0,"--table-sticky-header-offset":p?(0,a.h)(b):void 0}}})),_=(0,u.d)(((e,t)=>{const n=(0,i.w)("Table",H,e),{classNames:a,className:o,style:l,styles:s,unstyled:u,vars:h,horizontalSpacing:b,verticalSpacing:v,captionSide:y,stripedColor:g,highlightOnHoverColor:w,striped:f,highlightOnHover:x,withColumnBorders:N,withRowBorders:B,withTableBorder:C,borderColor:k,layout:E,variant:I,data:T,children:_,stickyHeader:q,stickyHeaderOffset:R,...L}=n,$=(0,c.y)({name:"Table",props:n,className:o,style:l,classes:p,classNames:a,styles:s,unstyled:u,rootSelector:"table",vars:h,varsResolver:j});return r.createElement(m,{value:{getStyles:$,stickyHeader:q,striped:!0===f?"odd":f||void 0,highlightOnHover:x,withColumnBorders:N,withRowBorders:B,captionSide:y||"bottom"}},r.createElement(d.x,{component:"table",variant:I,ref:t,mod:{"data-with-table-border":C},...$("table"),...L},_||!!T&&r.createElement(S,{data:T})))}));_.classes=p,_.displayName="@mantine/core/Table",_.Td=w,_.Th=g,_.Tr=f,_.Thead=x,_.Tbody=N,_.Tfoot=B,_.Caption=C,_.ScrollContainer=T,_.DataRenderer=S},3274:(e,t,n)=>{n.d(t,{k:()=>d});var r=n(2791),a=n(6519),o=n(204),l=n(245),s=n(6481),i={root:"m-87cf2631"};const c={__staticSelector:"UnstyledButton"},d=(0,s.b)(((e,t)=>{const n=(0,a.w)("UnstyledButton",c,e),{className:s,component:d="button",__staticSelector:u,unstyled:h,classNames:m,styles:b,style:p,...v}=n,y=(0,o.y)({name:u,props:n,classes:i,className:s,style:p,classNames:m,styles:b,unstyled:h});return r.createElement(l.x,{...y("root",{focusable:!0}),component:d,ref:t,type:"button"===d?"button":void 0,...v})}));d.classes=i,d.displayName="@mantine/core/UnstyledButton"}}]);
//# sourceMappingURL=836.5b3029b2.chunk.js.map