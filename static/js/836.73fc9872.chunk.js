"use strict";(self.webpackChunkdapp=self.webpackChunkdapp||[]).push([[836],{2174:(e,n,r)=>{r.d(n,{L:()=>c,S9:()=>d,_H:()=>o,kw:()=>h});r(9664);var t=r(3051),a=r(6070);const l=(0,a.B)("\n  query BattleLogs {\n    battleLogs {\n      id\n      battleIndex\n      character1 {\n        winner\n        attributes\n        character\n        experience\n        rating\n        level\n      }\n      character2 {\n        winner\n        attributes\n        experience\n        character\n        level\n        rating\n      }\n      lobby {\n        id\n        characters {\n          id\n          character {\n            owner\n            name\n            level\n            experience\n            attributes\n            id\n          }\n        }\n        capacity\n      }\n      turns {\n        character1 {\n          energy\n          hp\n          position\n        }\n        logs {\n          action\n          character\n        }\n        character2 {\n          energy\n          position\n          hp\n        }\n      }\n    }\n  }\n"),o=()=>(0,t.a)(l,void 0,{select:e=>e.battleLogs}),i=(0,a.B)("\n  query BattleLogById($battleId: String!) {\n    battleLogById(id: $battleId) {\n      id\n      battleIndex\n      character1 {\n        winner\n        attributes\n        character\n        experience\n        rating\n        level\n      }\n      character2 {\n        winner\n        attributes\n        experience\n        character\n        level\n        rating\n      }\n      lobby {\n        id\n        characters {\n          id\n          character {\n            owner\n            name\n            level\n            experience\n            attributes\n            id\n          }\n        }\n        capacity\n      }\n      turns {\n        character1 {\n          energy\n          hp\n          position\n        }\n        logs {\n          action\n          character\n        }\n        character2 {\n          energy\n          position\n          hp\n        }\n      }\n    }\n  }\n"),c=e=>{let{battleId:n}=e;return(0,t.a)(i,{battleId:`${n}`},{enabled:null!=n,select:e=>e.battleLogById,placeholderData:e=>e})},s=(0,a.B)("\n  query BattleLogsByLobbyId($lobbyId: String!) {\n    battleLogs(where: { lobby: { id_eq: $lobbyId } }) {\n      id\n    }\n  }\n"),d=e=>{let{lobbyId:n}=e;return(0,t.a)(s,{lobbyId:`${n}`},{enabled:null!=n,select:e=>e.battleLogs})},h=(e,n)=>{var r;return null===(r=e.lobby.characters.find((e=>{let{character:{id:r}}=e;return r===n})))||void 0===r?void 0:r.character}},8311:(e,n,r)=>{r.d(n,{AX:()=>s,C7:()=>d,iV:()=>c});var t=r(3675),a=r(6070),l=r(3051),o=r(9664);(0,a.B)("\n  query AllCharacters {\n    characters {\n      id\n      level\n      name\n      owner\n      experience\n      attributes\n    }\n  }\n");const i=(0,a.B)("\n  query CharactersByOwner($owner_eq: String!) {\n    characters(where: { owner_eq: $owner_eq }) {\n      id\n      level\n      name\n      owner\n      experience\n      attributes\n    }\n  }\n"),c=()=>{const e=(0,l.P)(i);o.E.invalidateQueries({queryKey:[e]})},s=e=>{let{owner_eq:n}=e;return(0,l.a)(i,{owner_eq:n})},d=()=>{var e;const{account:n}=(0,t.mA)(),r=s({owner_eq:null!==(e=null===n||void 0===n?void 0:n.decodedAddress)&&void 0!==e?e:""}),a=r.data;return{...r,data:null===a||void 0===a?void 0:a.characters[(null===a||void 0===a?void 0:a.characters.length)-1]}};(0,a.B)("\n  query CharacterById($character_id: String!) {\n    characterById(id: $character_id) {\n      attributes\n      experience\n      id\n      level\n      name\n      owner\n    }\n  }\n")},5619:(e,n,r)=>{r.d(n,{k:()=>l});var t=r(8501),a=r(184);const l=e=>{let{children:n,onClick:r,...l}=e;return(0,a.jsx)(t.z,{onClick:r,radius:"sm",bg:"primary",size:"md",px:"xl",style:e=>({boxShadow:e.shadows.sm}),styles:e=>({root:{"&:disabled":{backgroundColor:e.colors.gray[5],color:e.colors.gray[6]}}}),...l,children:n})}},1313:(e,n,r)=>{r.d(n,{i:()=>a});var t=r(3675);const a=()=>{const{account:e}=(0,t.mA)();return null===e||void 0===e?void 0:e.decodedAddress}},3836:(e,n,r)=>{r.r(n),r.d(n,{History:()=>m});var t=r(2174),a=r(7065),l=r(8769),o=r(9032),i=r(7689),c=r(1087),s=r(2791),d=r(8311),h=r(1313),b=r(5619),u=r(184);const m=()=>{var e;const n=(0,i.s0)(),r=(0,h.i)(),{data:m}=(0,d.AX)({owner_eq:null!==r&&void 0!==r?r:""}),{data:p}=(0,t._H)(),[g,w]=(0,c.lr)(),f="true"===g.get("filtered");(0,s.useEffect)((()=>{g.get("filtered")||w("filtered=true")}),[]);const x=s.useMemo((()=>{var e;if(!f)return p;const n=null!==(e=null===m||void 0===m?void 0:m.characters.map((e=>e.id)))&&void 0!==e?e:[];return null===p||void 0===p?void 0:p.filter((e=>n.includes(e.character1.character)||n.includes(e.character2.character)))}),[p,f,null===m||void 0===m?void 0:m.characters]),C=null!==(e=null===x||void 0===x?void 0:x.toReversed().map((e=>{const{id:n}=e,a=e.character1.character,l=e.character2.character,o=[a,l].map((n=>{var r,a;return null!==(r=null===(a=(0,t.kw)(e,n))||void 0===a?void 0:a.name)&&void 0!==r?r:"Player not found"})),i=[a,l].map((n=>{var r,a;return null!==(r=null===(a=(0,t.kw)(e,n))||void 0===a?void 0:a.owner)&&void 0!==r?r:"Player not found"})),c=e.character1.winner?(0,t.kw)(e,a):e.character2.winner?(0,t.kw)(e,l):{name:"No winner",owner:""},s=null===c||void 0===c?void 0:c.name,d=null===c||void 0===c?void 0:c.owner,h=i.includes(null!==r&&void 0!==r?r:"")||d&&d===r;return{playersNames:o,battleId:n,lobbyId:e.lobby.id,winner:s,includesMyCharacter:h}})))&&void 0!==e?e:[];return(0,u.jsx)("div",{className:"logs",children:(0,u.jsxs)("div",{className:"modal_leaderboard",children:[(0,u.jsx)(a.k,{style:{alignSelf:"stretch"},mb:"xs",children:(0,u.jsx)(b.k,{size:"sm",bg:"black",onClick:()=>w((e=>{const n=new URLSearchParams(e);return n.set("filtered",f?"false":"true"),n})),children:f?"Show all logs":"Show my logs only"})}),(0,u.jsx)("div",{className:"header",children:"History"}),(0,u.jsx)("div",{className:"modal_table",children:(0,u.jsxs)(l.i,{horizontalSpacing:"md",verticalSpacing:"md",children:[(0,u.jsx)(l.i.Thead,{children:(0,u.jsx)(l.i.Tr,{children:["Lobby ID","Battle ID","Players","Winner"].map(((e,n)=>(0,u.jsx)(l.i.Th,{w:y[n],ta:v[n],children:e},e)))})}),(0,u.jsx)(l.i.Tbody,{children:C.map((e=>(0,u.jsx)(l.i.Tr,{onClick:()=>{const[r,t]=e.battleId.split("-");n(o.F.tournamentResult({lobbyId:r,battleId:t}))},className:["table_row",e.includesMyCharacter&&!f?"table_row_highlighted":""].join(" "),children:[(0,u.jsxs)("div",{className:"badge",children:[" ",e.lobbyId]}),(0,u.jsx)("div",{className:"badge",children:e.battleId}),e.playersNames.map((e=>(0,u.jsx)("div",{children:e},e))),e.winner].map(((e,n)=>(0,u.jsx)(l.i.Td,{w:y[n],ta:v[n],children:e},n)))},`${e.battleId}-${e.lobbyId}`)))})]})})]})})},y={0:"100px",1:"100px"},v={0:"center",1:"center"}},8769:(e,n,r)=>{r.d(n,{i:()=>_});var t=r(2791),a=r(2020),l=r(5146),o=r(5838),i=r(3768),c=r(6519),s=r(204),d=r(245),h=r(8592),b=r(4799);const[u,m]=(0,b.R)("Table component was not found in the tree");var y={table:"m-b23fa0ef",th:"m-4e7aa4f3",tr:"m-4e7aa4fd",td:"m-4e7aa4ef",tbody:"m-b2404537",thead:"m-b242d975",caption:"m-9e5a3ac7",scrollContainer:"m-a100c15",scrollContainerInner:"m-62259741"};function v(e,n){if(!n)return;const r={};return n.columnBorder&&e.withColumnBorders&&(r["data-with-column-border"]=!0),n.rowBorder&&e.withRowBorders&&(r["data-with-row-border"]=!0),n.striped&&e.striped&&(r["data-striped"]=e.striped),n.highlightOnHover&&e.highlightOnHover&&(r["data-hover"]=!0),n.captionSide&&e.captionSide&&(r["data-side"]=e.captionSide),n.stickyHeader&&e.stickyHeader&&(r["data-sticky"]=!0),r}function p(e,n){const r=`Table${e.charAt(0).toUpperCase()}${e.slice(1)}`,a=(0,h.d)(((a,l)=>{const o=(0,c.w)(r,{},a),{classNames:i,className:s,style:h,styles:b,...u}=o,y=m();return t.createElement(d.x,{component:e,ref:l,...v(y,n),...y.getStyles(e,{className:s,classNames:i,style:h,styles:b,props:o}),...u})}));return a.displayName=`@mantine/core/${r}`,a.classes=y,a}const g=p("th",{columnBorder:!0}),w=p("td",{columnBorder:!0}),f=p("tr",{rowBorder:!0,striped:!0,highlightOnHover:!0}),x=p("thead",{stickyHeader:!0}),C=p("tbody"),S=p("tfoot"),k=p("caption",{captionSide:!0});function B(e){let{data:n}=e;return t.createElement(t.Fragment,null,n.caption&&t.createElement(k,null,n.caption),n.head&&t.createElement(x,null,t.createElement(f,null,n.head.map(((e,n)=>t.createElement(g,{key:n},e))))),n.body&&t.createElement(C,null,n.body.map(((e,n)=>t.createElement(f,{key:n},e.map(((e,n)=>t.createElement(w,{key:n},e))))))),n.foot&&t.createElement(S,null,t.createElement(f,null,n.foot.map(((e,n)=>t.createElement(g,{key:n},e))))))}B.displayName="@mantine/core/TableDataRenderer";var I=r(1619);const N={type:"scrollarea"},T=(0,o.Z)(((e,n)=>{let{minWidth:r,type:t}=n;return{scrollContainer:{"--table-min-width":(0,a.h)(r),"--table-overflow":"native"===t?"auto":void 0}}})),H=(0,h.d)(((e,n)=>{const r=(0,c.w)("TableScrollContainer",N,e),{classNames:a,className:l,style:o,styles:i,unstyled:h,vars:b,children:u,minWidth:m,type:v,...p}=r,g=(0,s.y)({name:"TableScrollContainer",classes:y,props:r,className:l,style:o,classNames:a,styles:i,unstyled:h,vars:b,varsResolver:T,rootSelector:"scrollContainer"});return t.createElement(d.x,{component:"scrollarea"===v?I.x:"div",..."scrollarea"===v?{offsetScrollbars:"x"}:{},ref:n,...g("scrollContainer"),...p},t.createElement("div",{...g("scrollContainerInner")},u))}));H.classes=y,H.displayName="@mantine/core/TableScrollContainer";const E={withRowBorders:!0,verticalSpacing:7},j=(0,o.Z)(((e,n)=>{let{layout:r,captionSide:t,horizontalSpacing:o,verticalSpacing:c,borderColor:s,stripedColor:d,highlightOnHoverColor:h,striped:b,highlightOnHover:u,stickyHeaderOffset:m,stickyHeader:y}=n;return{table:{"--table-layout":r,"--table-caption-side":t,"--table-horizontal-spacing":(0,l.bG)(o),"--table-vertical-spacing":(0,l.bG)(c),"--table-border-color":s?(0,i.p)(s,e):void 0,"--table-striped-color":b&&d?(0,i.p)(d,e):void 0,"--table-highlight-on-hover-color":u&&h?(0,i.p)(h,e):void 0,"--table-sticky-header-offset":y?(0,a.h)(m):void 0}}})),_=(0,h.d)(((e,n)=>{const r=(0,c.w)("Table",E,e),{classNames:a,className:l,style:o,styles:i,unstyled:h,vars:b,horizontalSpacing:m,verticalSpacing:v,captionSide:p,stripedColor:g,highlightOnHoverColor:w,striped:f,highlightOnHover:x,withColumnBorders:C,withRowBorders:S,withTableBorder:k,borderColor:I,layout:N,variant:T,data:H,children:_,stickyHeader:q,stickyHeaderOffset:$,...L}=r,R=(0,s.y)({name:"Table",props:r,className:l,style:o,classes:y,classNames:a,styles:i,unstyled:h,rootSelector:"table",vars:b,varsResolver:j});return t.createElement(u,{value:{getStyles:R,stickyHeader:q,striped:!0===f?"odd":f||void 0,highlightOnHover:x,withColumnBorders:C,withRowBorders:S,captionSide:p||"bottom"}},t.createElement(d.x,{component:"table",variant:T,ref:n,mod:{"data-with-table-border":k},...R("table"),...L},_||!!H&&t.createElement(B,{data:H})))}));_.classes=y,_.displayName="@mantine/core/Table",_.Td=w,_.Th=g,_.Tr=f,_.Thead=x,_.Tbody=C,_.Tfoot=S,_.Caption=k,_.ScrollContainer=H,_.DataRenderer=B}}]);
//# sourceMappingURL=836.73fc9872.chunk.js.map